{"version":3,"file":"player.js","sources":["../src/event/index.js","../src/util.js","../src/iconfont.js","../src/slider.js","../src/contraller_bar/bar.js","../src/event/eventName.js","../src/contraller_bar/left_bar.js","../src/contraller_bar/right_bar.js","../src/contraller_bar/scale_bar.js","../src/contraller_bar/index.js","../src/event/contrallerEvent.js","../src/message.js","../src/time_line.js","../src/event/errorEvent.js","../src/event/dragEvent.js","../src/api.js","../src/event/browserTabEvent.js","../src/live_heart.js","../src/player.js","../src/history/utils.js","../src/history/time_line_history.js","../src/history/play_end.js","../src/history/index.js","../src/createPlayer.js"],"sourcesContent":["class VideoEventInstance {\r\n  constructor(video) {\r\n    this.video = video\r\n    this.events = {}\r\n    this.playerEvents = {}\r\n  }\r\n  on(eventName, handle) {\r\n    this.events && this.events[eventName]\r\n      ? this.events[eventName].listener.push(handle)\r\n      : (this.events[eventName] = { type: eventName, listener: [handle] })\r\n  }\r\n  addEventListener(eventName, handle) {\r\n    if (this.video) {\r\n      this.playerEvents[eventName] ? this.playerEvents[eventName].push(handle) : (this.playerEvents[eventName] = [handle])\r\n      this.video.addEventListener(eventName, handle, false)\r\n    }\r\n  }\r\n  removeEventListener(eventName, handle) {\r\n    if (this.video) {\r\n      if (!this.playerEvents || !this.playerEvents[eventName]) {\r\n        return\r\n      }\r\n      let index = this.playerEvents[eventName].findIndex(v => v === handle)\r\n      index > -1 && this.playerEvents[eventName].splice(index, 1)\r\n      this.video.removeEventListener(eventName, handle, false)\r\n    }\r\n  }\r\n  emit(eventName, ...data) {\r\n    if (!this.events || !this.events[eventName]) {\r\n      return\r\n    }\r\n    this.events[eventName].listener.forEach(v => {\r\n      v(...data)\r\n    })\r\n  }\r\n  off(eventName, handle) {\r\n    if (!this.events || !this.events.eventName) {\r\n      return\r\n    }\r\n    let index = this.events[eventName].listener.findIndex(v => v === handle)\r\n    index > -1 && this.events[eventName].listener.splice(index, 1)\r\n  }\r\n  getApi() {\r\n    return { on: this.on.bind(this), off: this.off.bind(this), emit: this.emit.bind(this), addEventListener: this.addEventListener.bind(this), removeEventListener: this.removeEventListener.bind(this) }\r\n  }\r\n  destroy() {\r\n    Object.keys(this.playerEvents).forEach(key => {\r\n      this.playerEvents[key].forEach(fn => {\r\n        this.removeEventListener(key, fn)\r\n      })\r\n    })\r\n    this.playerEvents = {}\r\n    this.events = {}\r\n    this.video = null\r\n  }\r\n}\r\n\r\nexport default VideoEventInstance\r\n","import flvjs from 'flv.zv.js'\r\nimport * as Hls from 'hls.js'\r\n\r\n/**\r\n * 创建HLS对象\r\n * @param {*} video\r\n * @param {*} file\r\n */\r\nexport function createHlsPlayer(video, file) {\r\n  if (Hls.isSupported()) {\r\n    const player = new Hls({\r\n      liveDurationInfinity: true,\r\n      levelLoadingTimeOut: 15000,\r\n      fragLoadingTimeOut: 25000,\r\n      enableWorker: true,\r\n    })\r\n    player.loadSource(file)\r\n    player.attachMedia(video)\r\n    return player\r\n  }\r\n}\r\n\r\n/**\r\n * 创建FLV对象\r\n * @param {*} video\r\n * @param {*} options\r\n */\r\nexport function createFlvPlayer(video, options) {\r\n  const { flvOptions = {}, flvConfig = {} } = options\r\n  if (flvjs.isSupported()) {\r\n    const player = flvjs.createPlayer(\r\n      Object.assign(\r\n        {},\r\n        {\r\n          type: 'flv',\r\n          url: options.file,\r\n        },\r\n        flvOptions\r\n      ),\r\n      Object.assign(\r\n        {},\r\n        {\r\n          enableWorker: true,\r\n          // lazyLoad: false,\r\n          // Indicates how many seconds of data to be kept for lazyLoad.\r\n          // lazyLoadMaxDuration: 0,\r\n          // autoCleanupMaxBackwardDuration: 3,\r\n          // autoCleanupMinBackwardDuration: 2,\r\n          // autoCleanupSourceBuffer: true,\r\n          enableStashBuffer: false,\r\n          stashInitialSize: 128,\r\n          isLive: options.isLive || true,\r\n        },\r\n        flvConfig\r\n      )\r\n    )\r\n    player.attachMediaElement(video)\r\n    player.load()\r\n    return player\r\n  }\r\n}\r\n\r\n/**\r\n * 获取播放文件类型\r\n * @param {*} url\r\n */\r\nexport function getVideoType(url) {\r\n  return url.indexOf('.flv') > -1 ? 'flv' : url.indexOf('.m3u8') > -1 ? 'm3u8' : 'native'\r\n}\r\n\r\n/**\r\n * 播放时间转字符串\r\n * @param {*} second_time\r\n */\r\nexport function timeStamp(second_time) {\r\n  let time = Math.ceil(second_time)\r\n  if (time > 60) {\r\n    let second = Math.ceil(second_time % 60)\r\n    let min = Math.floor(second_time / 60)\r\n    time = `${min < 10 ? `0${min}` : min}:${second < 10 ? `0${second}` : second}`\r\n    if (min > 60) {\r\n      min = Math.ceil((second_time / 60) % 60)\r\n      let hour = Math.floor(second_time / 60 / 60)\r\n      time = `${hour < 10 ? `0${hour}` : hour}:${min < 10 ? `0${min}` : min}:${second < 10 ? `0${second}` : second}`\r\n    } else {\r\n      time = `00:${time}`\r\n    }\r\n  } else {\r\n    time = `00:00:${time < 10 ? `0${time}` : time}`\r\n  }\r\n\r\n  return time\r\n}\r\n\r\n/**\r\n * 日期格式化\r\n * @param {*} timetemp\r\n */\r\nexport function dateFormat(timetemp) {\r\n  const date = new Date(timetemp)\r\n  let YYYY = date.getFullYear()\r\n  let DD = date.getDate()\r\n  let MM = date.getMonth() + 1\r\n  let hh = date.getHours()\r\n  let mm = date.getMinutes()\r\n  let ss = date.getSeconds()\r\n  return `${YYYY}.${MM > 9 ? MM : '0' + MM}.${DD > 9 ? DD : '0' + DD} ${hh > 9 ? hh : '0' + hh}.${mm > 9 ? mm : '0' + mm}.${ss > 9 ? ss : '0' + ss}`\r\n}\r\n\r\n/**\r\n * 全屏\r\n * @param {*} element\r\n */\r\nexport function fullscreen(element) {\r\n  if (element.requestFullScreen) {\r\n    element.requestFullScreen()\r\n  } else if (element.webkitRequestFullScreen) {\r\n    element.webkitRequestFullScreen()\r\n  } else if (element.mozRequestFullScreen) {\r\n    element.mozRequestFullScreen()\r\n  } else if (element.msRequestFullscreen) {\r\n    element.msRequestFullscreen()\r\n  }\r\n}\r\n\r\n/**\r\n * exitFullscreen 退出全屏\r\n * @param  {Objct} element 选择器\r\n */\r\nexport function exitFullscreen() {\r\n  if (document.exitFullscreen) {\r\n    document.exitFullscreen()\r\n  } else if (document.mozCancelFullScreen) {\r\n    document.mozCancelFullScreen()\r\n  } else if (document.webkitExitFullscreen) {\r\n    document.webkitExitFullscreen()\r\n  } else if (document.msExitFullscreen) {\r\n    document.msExitFullscreen()\r\n  }\r\n}\r\n\r\n/**\r\n * 判读是否支持全屏\r\n */\r\nexport function fullscreenEnabled() {\r\n  return document.fullscreenEnabled || document.mozFullScreenEnabled || document.webkitFullscreenEnabled || document.msFullscreenEnabled\r\n}\r\n\r\n/**\r\n * [isFullscreen 判断浏览器是否全屏]\r\n * @return [全屏则返回当前调用全屏的元素,不全屏返回false]\r\n */\r\nexport function isFullscreen(ele) {\r\n  if (!ele) {\r\n    return false\r\n  }\r\n  return document.fullscreenElement === ele || document.msFullscreenElement === ele || document.mozFullScreenElement === ele || document.webkitFullscreenElement === ele || false\r\n}\r\n// 添加 / 移除 全屏事件监听\r\nexport function fullScreenListener(isAdd, fullscreenchange) {\r\n  const funcName = isAdd ? 'addEventListener' : 'removeEventListener'\r\n  const fullScreenEvents = ['fullscreenchange', 'mozfullscreenchange', 'webkitfullscreenchange', 'msfullscreenchange']\r\n  fullScreenEvents.map((v) => document[funcName](v, fullscreenchange))\r\n}\r\n\r\n/**\r\n * 计算视频拖拽边界\r\n * @param {*} ele\r\n * @param {*} currentPosition\r\n * @param {*} scale\r\n */\r\nexport function computedBound(ele, currentPosition, scale) {\r\n  const data = currentPosition\r\n  const eleRect = ele.getBoundingClientRect()\r\n  const w = eleRect.width\r\n  const h = eleRect.height\r\n  let lx = 0,\r\n    ly = 0\r\n  if (scale === 1) {\r\n    return [0, 0]\r\n  }\r\n  lx = (w * (scale - 1)) / 2 / scale\r\n  ly = (h * (scale - 1)) / 2 / scale\r\n  let x = 0,\r\n    y = 0\r\n  if (data[0] >= 0 && data[0] > lx) {\r\n    x = lx\r\n  }\r\n  if (data[0] >= 0 && data[0] < lx) {\r\n    x = data[0]\r\n  }\r\n\r\n  if (data[0] < 0 && data[0] < -lx) {\r\n    x = -lx\r\n  }\r\n  if (data[0] < 0 && data[0] > -lx) {\r\n    x = data[0]\r\n  }\r\n\r\n  if (data[1] >= 0 && data[1] > ly) {\r\n    y = ly\r\n  }\r\n  if (data[1] >= 0 && data[1] < ly) {\r\n    y = data[1]\r\n  }\r\n\r\n  if (data[1] < 0 && data[1] < -ly) {\r\n    y = -ly\r\n  }\r\n  if (data[1] < 0 && data[1] > -ly) {\r\n    y = data[1]\r\n  }\r\n  if (x !== data[0] || y !== data[1]) {\r\n    return [x, y]\r\n  } else {\r\n    return\r\n  }\r\n}\r\n\r\nexport function getRandom() {\r\n  return Math.random().toString(36).substr(2)\r\n}\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport './style/iconfont.less'\r\n\r\nexport default function IconFont({ type, className = '', ...props }) {\r\n  return <i className={`lm-player-iconfont ${type} ${className}`} {...props} />\r\n}\r\n\r\nIconFont.propTypes = {\r\n  type: PropTypes.string,\r\n  className: PropTypes.string\r\n}\r\n","import React, { useEffect, useRef } from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport PropTypes from 'prop-types'\r\nimport './style/slider.less'\r\n\r\nclass Slider extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.sliderDomRef = React.createRef()\r\n    this.layoutDom = null\r\n    this.lineDom = null\r\n    this.dragDom = null\r\n    this.dragFlag = false\r\n    this.state = {\r\n      value: this.props.currentPercent || 0,\r\n      tempValue: 0,\r\n      showTips: false,\r\n      tipsX: 0,\r\n      tipsY: 0\r\n    }\r\n  }\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    if (!this.dragFlag) {\r\n      this.setState({ value: nextProps.currentPercent || 0 })\r\n    }\r\n  }\r\n  componentDidMount() {\r\n    this.layoutDom = this.sliderDomRef.current\r\n    this.dragDom = this.layoutDom.querySelector('.drag-change-icon')\r\n    this.lineDom = this.layoutDom.querySelector('.slider-content')\r\n\r\n    this.layoutDom.addEventListener('mousemove', this.renderSliderTips, false)\r\n    this.layoutDom.addEventListener('mouseout', this.hideSliderTips, false)\r\n    this.lineDom.addEventListener('click', this.changeCurrentValue, false)\r\n    this.dragDom.addEventListener('click', this.cancelPropagation, false)\r\n    this.dragDom.addEventListener('mousedown', this.startDrag, false)\r\n  }\r\n  componentWillUnmount() {\r\n    clearTimeout(this.timer)\r\n    this.layoutDom.removeEventListener('mousemove', this.renderSliderTips, false)\r\n    this.layoutDom.removeEventListener('mouseout', this.hideSliderTips, false)\r\n    this.lineDom.removeEventListener('click', this.changeCurrentValue, false)\r\n    this.dragDom.removeEventListener('click', this.cancelPropagation, false)\r\n    this.dragDom.removeEventListener('mousedown', this.startDrag, false)\r\n\r\n    document.body.removeEventListener('mousemove', this.moveChange)\r\n    document.body.removeEventListener('mouseup', this.stopDrag)\r\n\r\n    this.sliderDomRef = null\r\n    this.layoutDom = null\r\n    this.lineDom = null\r\n    this.dragDom = null\r\n    this.dragFlag = null\r\n  }\r\n  renderSliderTips = e => {\r\n    const { renderTips } = this.props\r\n    if (!renderTips) {\r\n      return\r\n    }\r\n    clearTimeout(this.timer)\r\n    this.timer = setTimeout(() => {\r\n      const { x, width, top } = this.layoutDom.getBoundingClientRect()\r\n      const tipsX = e.pageX - x\r\n      let percent = (e.pageX - x) / width\r\n      percent = percent < 0 ? 0 : percent > 1 ? 1 : percent\r\n      this.setState({ tipsX, tipsY: top, showTips: true, tempValue: percent })\r\n    }, 200)\r\n  }\r\n  hideSliderTips = () => {\r\n    clearTimeout(this.timer)\r\n    this.setState({ showTips: false })\r\n  }\r\n  cancelPropagation = e => {\r\n    e.stopPropagation()\r\n  }\r\n  startDrag = e => {\r\n    e.stopPropagation()\r\n    this.dragFlag = true\r\n    document.body.addEventListener('mousemove', this.moveChange)\r\n    document.body.addEventListener('mouseup', this.stopDrag)\r\n  }\r\n  moveChange = e => {\r\n    e.stopPropagation()\r\n    const percent = this.computedPositionForEvent(e)\r\n    this.setState({ value: percent })\r\n  }\r\n  stopDrag = e => {\r\n    e.stopPropagation()\r\n    document.body.removeEventListener('mousemove', this.moveChange)\r\n    document.body.removeEventListener('mouseup', this.stopDrag)\r\n    this.dragFlag = false\r\n    let percent = this.state.value / 100\r\n    percent = percent < 0 ? 0 : percent > 1 ? 1 : percent\r\n    this.props.onChange && this.props.onChange(percent)\r\n  }\r\n  computedPositionForEvent(e) {\r\n    const { x, width } = this.layoutDom.getBoundingClientRect()\r\n    const { pageX } = e\r\n    let dx = pageX - x\r\n    if (dx > width) {\r\n      dx = width\r\n    }\r\n    if (dx < 0) {\r\n      dx = 0\r\n    }\r\n    return (dx / width) * 100\r\n  }\r\n  changeCurrentValue = event => {\r\n    event.stopPropagation()\r\n    const { width, x } = this.layoutDom.getBoundingClientRect()\r\n    let percent = (event.pageX - x) / width\r\n    this.props.onChange && this.props.onChange(percent)\r\n  }\r\n  render() {\r\n    const { value, showTips, tipsX } = this.state\r\n    const { availablePercent = 0, className = '', tipsY } = this.props\r\n    return (\r\n      <div className={`slider-layout ${className}`} ref={this.sliderDomRef}>\r\n        <div className=\"slider-content\">\r\n          <div className=\"slider-max-line\" />\r\n          <div className=\"slider-visibel-line\" style={{ width: `${availablePercent}%` }} />\r\n          <div className=\"slider-current-line\" style={{ width: `${value}%` }} />\r\n          {this.props.children}\r\n        </div>\r\n        <div className=\"slider-other-content\">\r\n          <div className=\"drag-change-icon\" draggable={false} style={{ left: `${value}%` }} />\r\n        </div>\r\n        <Tips visibel={showTips} className=\"lm-player-slide-tips\" style={{ left: tipsX, top: tipsY }} getContainer={() => this.sliderDomRef.current}>\r\n          {this.props.renderTips && this.props.renderTips(this.state.tempValue)}\r\n        </Tips>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nSlider.propTypes = {\r\n  currentPercent: PropTypes.number,\r\n  seekTo: PropTypes.func,\r\n  video: PropTypes.element,\r\n  renderTips: PropTypes.func,\r\n  availablePercent: PropTypes.number,\r\n  onChange: PropTypes.func,\r\n  children: PropTypes.any,\r\n  className: PropTypes.string,\r\n  tipsY: PropTypes.number\r\n}\r\nSlider.defaultProps = {\r\n  tipsY: -10\r\n}\r\n\r\nfunction Tips({ getContainer, visibel, children, style, className = '' }) {\r\n  const ele = useRef(document.createElement('div'))\r\n  useEffect(() => {\r\n    const box = getContainer ? getContainer() || document.body : document.body\r\n    box.appendChild(ele.current)\r\n    return () => box.removeChild(ele.current)\r\n  }, [getContainer])\r\n\r\n  if (!visibel) {\r\n    return null\r\n  }\r\n  return ReactDOM.createPortal(\r\n    <div className={className} style={style}>\r\n      {children}\r\n    </div>,\r\n    ele.current\r\n  )\r\n}\r\n\r\nTips.propTypes = {\r\n  visibel: PropTypes.bool,\r\n  children: PropTypes.element,\r\n  style: PropTypes.any,\r\n  className: PropTypes.string\r\n}\r\n\r\nexport default Slider\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nexport default function Bar({ visibel = true, className = '', children, ...props }) {\r\n  if (visibel === false) {\r\n    return null\r\n  }\r\n  return (\r\n    <span className={`contraller-bar-item ${className}`} {...props}>\r\n      {children}\r\n    </span>\r\n  )\r\n}\r\n\r\nBar.propTypes = {\r\n  visibel: PropTypes.bool,\r\n  className: PropTypes.string,\r\n  children: PropTypes.any\r\n}\r\n","export default {\r\n  RELOAD: \"reload\", //手动视频重载\r\n  RELOAD_FAIL: \"reloadFail\", // 视频出错，重连失败\r\n  RELOAD_SUCCESS: \"reloadSuccess\", //视频出错，重连成功\r\n  ERROR: \"error\", //视频出错\r\n  ERROR_RELOAD: \"errorRload\", //视频出错，自动重连\r\n  HISTORY_PLAY_END: \"historyPlayEnd\", //历史视频列表播放结束\r\n  SEEK: \"seek\", //跳跃播放时间\r\n  TRANSFORM: \"transform\", //视频容器缩放\r\n  CHANGE_PLAY_INDEX: \"changePlayIndex\", //历史视频列表播放索引改变\r\n  HIDE_CONTRALLER:\"hideContraller\",\r\n  SHOW_CONTRALLER:\"showContraller\",\r\n  CLEAR_ERROR_TIMER:\"clearErrorTimer\"\r\n};\r\n","import React, { useState, useEffect, useCallback, useMemo } from 'react'\r\nimport IconFont from '../iconfont'\r\nimport Slider from '../slider'\r\nimport Bar from './bar'\r\nimport EventName from '../event/eventName'\r\nimport PropTypes from 'prop-types'\r\n\r\nfunction LeftBar({ api, event, video, isHistory, reloadHistory, isLive, leftExtContents, leftMidExtContents }) {\r\n  const [openSliderVolume, setOpenSliderVolume] = useState(false)\r\n  const [dep, setDep] = useState(Date.now())\r\n  useEffect(() => {\r\n    const updateRender = () => {\r\n      setDep(Date.now())\r\n    }\r\n    event.addEventListener('play', updateRender)\r\n    event.addEventListener('pause', updateRender)\r\n    event.addEventListener('volumechange', updateRender)\r\n\r\n    return () => {\r\n      event.removeEventListener('play', updateRender)\r\n      event.removeEventListener('pause', updateRender)\r\n      event.removeEventListener('volumechange', updateRender)\r\n    }\r\n  }, [event])\r\n\r\n  //缓存值\r\n  const paused = useMemo(() => video.paused, [dep, video])\r\n  const statusIconClassName = useMemo(() => (paused ? 'lm-player-Play_Main' : 'lm-player-Pause_Main'), [paused])\r\n  const statusText = useMemo(() => (paused ? '播放' : '暂停'), [paused])\r\n  const volumeVal = useMemo(() => (video.muted ? 0 : video.volume), [dep, video])\r\n  const volumeIcon = useMemo(() => (volumeVal === 0 ? 'lm-player-volume-close' : video.volume === 1 ? 'lm-player-volume-max' : 'lm-player-volume-normal-fuben'), [volumeVal])\r\n  const volumePercent = useMemo(() => (volumeVal === 0 ? 0 : volumeVal * 100), [volumeVal])\r\n  const sliderClassName = useMemo(() => (openSliderVolume ? 'contraller-bar-hover-volume' : ''), [openSliderVolume])\r\n\r\n  //TODO 方法\r\n  const changePlayStatus = useCallback(() => (video.paused ? api.play() : api.pause()), [video, api])\r\n\r\n  const mutedChantgeStatus = useCallback(() => (video.muted ? api.unmute() : api.mute()), [api, video])\r\n\r\n  const onChangeVolume = useCallback(\r\n    volume => {\r\n      api.setVolume(parseFloat(volume.toFixed(1)))\r\n      volume > 0 && video.muted && api.unmute()\r\n    },\r\n    [api, video]\r\n  )\r\n\r\n  const reload = useCallback(() => {\r\n    isHistory ? reloadHistory() : api.reload()\r\n    event.emit(EventName.CLEAR_ERROR_TIMER)\r\n  }, [event, isHistory, api])\r\n\r\n  return (\r\n    <div className=\"contraller-left-bar\">\r\n      {leftExtContents}\r\n      <Bar visibel={!isLive}>\r\n        <IconFont onClick={changePlayStatus} type={statusIconClassName} title={statusText} />\r\n      </Bar>\r\n      <Bar className={`contraller-bar-volume ${sliderClassName}`} onMouseOver={() => setOpenSliderVolume(true)} onMouseOut={() => setOpenSliderVolume(false)}>\r\n        <IconFont onClick={mutedChantgeStatus} type={volumeIcon} title=\"音量\" />\r\n        <div className=\"volume-slider-layout\">\r\n          <Slider className=\"volume-slider\" currentPercent={volumePercent} onChange={onChangeVolume} renderTips={precent => <span>{Math.round(precent * 100)}%</span>} tipsY={-2} />\r\n        </div>\r\n      </Bar>\r\n      <Bar>\r\n        <IconFont onClick={reload} type=\"lm-player-Refresh_Main\" title=\"重载\" />\r\n      </Bar>\r\n      {leftMidExtContents}\r\n    </div>\r\n  )\r\n}\r\n\r\nLeftBar.propTypes = {\r\n  api: PropTypes.object,\r\n  event: PropTypes.object,\r\n  playerProps: PropTypes.object,\r\n  video: PropTypes.node,\r\n  reloadHistory: PropTypes.func,\r\n  isHistory: PropTypes.bool\r\n}\r\n\r\nexport default LeftBar\r\n","import React, { useState, useMemo, useEffect, useCallback } from 'react'\r\nimport IconFont from '../iconfont'\r\nimport Bar from './bar'\r\nimport { isFullscreen, fullScreenListener, computedBound } from '../util'\r\nimport PropTypes from 'prop-types'\r\n\r\nfunction RightBar({ playContainer, api, scale, snapshot, rightExtContents, rightMidExtContents }) {\r\n  const [dep, setDep] = useState(Date.now())\r\n\r\n  useEffect(() => {\r\n    const update = () => setDep(Date.now())\r\n    fullScreenListener(true, update)\r\n    return () => fullScreenListener(false, update)\r\n  }, [])\r\n\r\n  const isfull = useMemo(() => isFullscreen(playContainer), [dep, playContainer])\r\n\r\n  const fullscreen = useCallback(() => {\r\n    !isFullscreen(playContainer) ? api.requestFullScreen() : api.cancelFullScreen()\r\n    setDep(Date.now())\r\n  }, [api, playContainer])\r\n\r\n  const setScale = useCallback(\r\n    (...args) => {\r\n      const dragDom = playContainer.querySelector('.player-mask-layout')\r\n      api.setScale(...args)\r\n      let position = computedBound(dragDom, api.getPosition(), api.getScale())\r\n      if (position) {\r\n        api.setPosition(position, true)\r\n      }\r\n    },\r\n    [api, playContainer]\r\n  )\r\n\r\n  return (\r\n    <div className=\"contraller-right-bar\">\r\n      {rightMidExtContents}\r\n      {scale && (\r\n        <>\r\n          <Bar>\r\n            <IconFont title=\"缩小\" onClick={() => setScale(-0.2)} type={'lm-player-ZoomOut_Main'} />\r\n          </Bar>\r\n          <Bar>\r\n            <IconFont title=\"复位\" onClick={() => setScale(1, true)} type={'lm-player-ZoomDefault_Main'} />\r\n          </Bar>\r\n          <Bar>\r\n            <IconFont title=\"放大\" onClick={() => setScale(0.2)} type={'lm-player-ZoomIn_Main'} />\r\n          </Bar>\r\n        </>\r\n      )}\r\n\r\n      {snapshot && (\r\n        <Bar>\r\n          <IconFont title=\"截图\" onClick={() => snapshot(api.snapshot())} type=\"lm-player-SearchBox\" />\r\n        </Bar>\r\n      )}\r\n      <Bar>\r\n        <IconFont title={isfull ? '窗口' : '全屏'} onClick={fullscreen} type={isfull ? 'lm-player-ExitFull_Main' : 'lm-player-Full_Main'} />\r\n      </Bar>\r\n      {rightExtContents}\r\n    </div>\r\n  )\r\n}\r\n\r\nRightBar.propTypes = {\r\n  api: PropTypes.object,\r\n  event: PropTypes.object,\r\n  playerProps: PropTypes.object,\r\n  playContainer: PropTypes.node,\r\n  reloadHistory: PropTypes.func,\r\n  isHistory: PropTypes.bool,\r\n}\r\nexport default RightBar\r\n","import React, { useCallback } from 'react'\r\nimport IconFont from '../iconfont'\r\nimport Bar from './bar'\r\nimport { computedBound } from '../util'\r\n\r\nfunction ScaleBar({ playContainer, api, scale }) {\r\n  const setScale = useCallback(\r\n    (...args) => {\r\n      const dragDom = playContainer.querySelector('.player-mask-layout')\r\n      api.setScale(...args)\r\n      let position = computedBound(dragDom, api.getPosition(), api.getScale())\r\n      if (position) {\r\n        api.setPosition(position, true)\r\n      }\r\n    },\r\n    [api, playContainer]\r\n  )\r\n\r\n  return (\r\n    <div className=\"contraller-scale-bar\">\r\n      {scale && (\r\n        <>\r\n          <Bar>\r\n            <IconFont title=\"缩小\" onClick={() => setScale(-0.2)} type={'lm-player-ZoomOut_Main'} />\r\n          </Bar>\r\n          <Bar>\r\n            <IconFont title=\"复位\" onClick={() => setScale(1, true)} type={'lm-player-ZoomDefault_Main'} />\r\n          </Bar>\r\n          <Bar>\r\n            <IconFont title=\"放大\" onClick={() => setScale(0.2)} type={'lm-player-ZoomIn_Main'} />\r\n          </Bar>\r\n        </>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ScaleBar\r\n","import React from 'react'\r\nimport LeftBar from './left_bar'\r\nimport RightBar from './right_bar'\r\nimport PropTypes from 'prop-types'\r\nimport ScaleBar from './scale_bar'\r\nimport '../style/bar.less'\r\n\r\nfunction ContrallerBar({\r\n  playContainer,\r\n  snapshot,\r\n  rightExtContents,\r\n  rightMidExtContents,\r\n  scale,\r\n  visibel,\r\n  api,\r\n  event,\r\n  video,\r\n  isHistory,\r\n  reloadHistory,\r\n  isLive,\r\n  leftExtContents,\r\n  leftMidExtContents,\r\n}) {\r\n  return (\r\n    <>\r\n      <div className={`contraller-bar-layout ${!visibel ? 'hide-contraller-bar' : ''}`}>\r\n        <LeftBar\r\n          api={api}\r\n          event={event}\r\n          video={video}\r\n          isHistory={isHistory}\r\n          reloadHistory={reloadHistory}\r\n          isLive={isLive}\r\n          leftMidExtContents={leftMidExtContents}\r\n          leftExtContents={leftExtContents}\r\n        />\r\n        <RightBar\r\n          api={api}\r\n          event={event}\r\n          playContainer={playContainer}\r\n          snapshot={snapshot}\r\n          rightExtContents={rightExtContents}\r\n          rightMidExtContents={rightMidExtContents}\r\n        />\r\n      </div>\r\n      <div className={`contraller-scale-layout ${!visibel ? 'hide-contraller-bar' : ''}`}>\r\n        <ScaleBar api={api} playContainer={playContainer} scale={scale} />\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nContrallerBar.propTypes = {\r\n  visibel: PropTypes.bool,\r\n}\r\n\r\nexport default ContrallerBar\r\n","import React, { useEffect, useState, useRef } from 'react'\r\nimport EventName from './eventName'\r\n\r\nfunction ContrallerEvent({ event, playContainer, children }) {\r\n  const timer = useRef(null)\r\n  const [visibel, setVisibel] = useState(true)\r\n  useEffect(() => {\r\n    const showContraller = () => {\r\n      setVisibel(true)\r\n      hideContraller()\r\n      event.emit(EventName.SHOW_CONTRALLER)\r\n    }\r\n    const hideContraller = () => {\r\n      clearTimeout(timer.current)\r\n      timer.current = setTimeout(() => {\r\n        setVisibel(false)\r\n        event.emit(EventName.HIDE_CONTRALLER)\r\n      }, 3 * 1000)\r\n    }\r\n    playContainer.addEventListener('mousemove', showContraller, false)\r\n    playContainer.addEventListener('mouseout', hideContraller, false)\r\n\r\n    return () => {\r\n      playContainer.removeEventListener('mousemove', showContraller, false)\r\n      playContainer.removeEventListener('mouseout', hideContraller, false)\r\n    }\r\n  }, [])\r\n\r\n  return React.Children.map(children, child => (React.isValidElement(child) ? React.cloneElement(child, { visibel }) : child))\r\n}\r\n\r\nexport default ContrallerEvent\r\n","import React, { useEffect, useState, useMemo } from 'react'\r\nimport IconFont from './iconfont'\r\nimport EventName from './event/eventName'\r\nimport './style/message.less'\r\n\r\nfunction VideoMessage({ event, api }) {\r\n  const [state, setState] = useState({ status: null, errorTimer: null, loading: false })\r\n\r\n  const message = useMemo(() => {\r\n    if (!state.status) {\r\n      return ''\r\n    }\r\n    if (state.status === 'fail') {\r\n      return '视频错误'\r\n    }\r\n    if (state.status === 'reload') {\r\n      return `视频加载错误，正在进行重连第${state.errorTimer}次重连`\r\n    }\r\n  }, [state.errorTimer, state.status])\r\n\r\n  useEffect(() => {\r\n    const openLoading = () => setState(old => ({ ...old, loading: true }))\r\n    const closeLoading = () => setState(old => ({ ...old, loading: false }))\r\n    const errorReload = timer => setState(() => ({ status: 'reload', errorTimer: timer, loading: true }))\r\n    const reloadFail = () => setState(old => ({ ...old, status: 'fail' }))\r\n    const reloadSuccess = () => setState(old => ({ ...old, status: null }))\r\n    const reload = () => setState(old => ({ ...old, status: 'reload' }))\r\n    const playEnd = () => (setState(old => ({ ...old, status: null, loading: false })), api.pause())\r\n\r\n    event.addEventListener('loadstart', openLoading)\r\n    event.addEventListener('waiting', openLoading)\r\n    event.addEventListener('seeking', openLoading)\r\n    event.addEventListener('loadeddata', closeLoading)\r\n    event.addEventListener('canplay', closeLoading)\r\n    event.on(EventName.ERROR_RELOAD, errorReload)\r\n    event.on(EventName.RELOAD_FAIL, reloadFail)\r\n    event.on(EventName.RELOAD_SUCCESS, reloadSuccess)\r\n    event.on(EventName.RELOAD, reload)\r\n    event.on(EventName.HISTORY_PLAY_END, playEnd)\r\n    event.on(EventName.CLEAR_ERROR_TIMER, reloadSuccess)\r\n\r\n    return () => {\r\n      event.removeEventListener('loadstart', openLoading)\r\n      event.removeEventListener('waiting', openLoading)\r\n      event.removeEventListener('seeking', openLoading)\r\n      event.removeEventListener('loadeddata', closeLoading)\r\n      event.removeEventListener('canplay', closeLoading)\r\n      event.off(EventName.ERROR_RELOAD, errorReload)\r\n      event.off(EventName.RELOAD_FAIL, reloadFail)\r\n      event.off(EventName.RELOAD_SUCCESS, reloadSuccess)\r\n      event.off(EventName.RELOAD, reload)\r\n      event.off(EventName.HISTORY_PLAY_END, playEnd)\r\n      event.off(EventName.CLEAR_ERROR_TIMER, reloadSuccess)\r\n    }\r\n  }, [event])\r\n\r\n  const { loading, status } = state\r\n  return (\r\n    <div className={`lm-player-message-mask ${loading || status === 'fail' ? 'lm-player-mask-loading-animation' : ''}`}>\r\n      <IconFont\r\n        type={status === 'fail' ? 'lm-player-YesorNo_No_Dark' : 'lm-player-Loading'}\r\n        className={`${loading && status !== 'fail' ? 'lm-player-loading-animation' : status === 'fail' ? 'lm-player-loadfail' : ''} lm-player-loading-icon`}\r\n      />\r\n      <span className=\"lm-player-message\">{message}</span>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport const NoSource = () => {\r\n  return (\r\n    <div className=\"lm-player-message-mask lm-player-mask-loading-animation\">\r\n      <IconFont style={{ fontSize: 80 }} type=\"lm-player-PlaySource\" title=\"请选择视频源\"></IconFont>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default VideoMessage\r\n","import React, { useEffect, useState, useMemo, useCallback } from 'react'\r\nimport IconFont from './iconfont'\r\nimport Slider from './slider'\r\nimport { timeStamp } from './util'\r\nimport './style/time-line.less'\r\n\r\nfunction TineLine({ event, api, visibel }) {\r\n  const [state, setState] = useState({ duration: 0, currentTime: 0, buffered: 0 })\r\n\r\n  useEffect(() => {\r\n    const getDuration = () => setState((old) => ({ ...old, duration: api.getDuration() }))\r\n    const getCurrentTime = () => setState((old) => ({ ...old, currentTime: api.getCurrentTime(), buffered: api.getSecondsLoaded() }))\r\n    const getBuffered = () => setState((old) => ({ ...old, buffered: api.getSecondsLoaded() }))\r\n    const seekendPlay = () => api.play()\r\n\r\n    event.addEventListener('loadedmetadata', getDuration)\r\n    event.addEventListener('durationchange', getDuration)\r\n    event.addEventListener('timeupdate', getCurrentTime)\r\n    event.addEventListener('progress', getBuffered)\r\n    event.addEventListener('suspend', getBuffered)\r\n    event.addEventListener('seeked', seekendPlay)\r\n\r\n    return () => {\r\n      event.removeEventListener('loadedmetadata', getDuration)\r\n      event.removeEventListener('durationchange', getDuration)\r\n      event.removeEventListener('timeupdate', getCurrentTime)\r\n      event.removeEventListener('progress', getBuffered)\r\n      event.removeEventListener('suspend', getBuffered)\r\n      event.removeEventListener('seeked', seekendPlay)\r\n    }\r\n  }, [event, api])\r\n\r\n  const { duration, currentTime, buffered } = state\r\n  const playPercent = useMemo(() => Math.round((currentTime / duration) * 100), [currentTime, duration])\r\n  const bufferedPercent = useMemo(() => Math.round((buffered / duration) * 100), [buffered, duration])\r\n\r\n  const changePlayTime = useCallback(\r\n    (percent) => {\r\n      const currentTime = percent * duration\r\n      api.pause()\r\n      api.seekTo(currentTime)\r\n      setState((old) => ({ ...old, currentTime }))\r\n    },\r\n    [duration, api]\r\n  )\r\n\r\n  const renderTimeLineTips = (percent) => {\r\n    const currentTime = percent * duration\r\n    const time = timeStamp(currentTime)\r\n    return <span>{time}</span>\r\n  }\r\n\r\n  return (\r\n    <div className={`video-time-line-layout ${!visibel ? 'hide-time-line' : ''}`}>\r\n      <IconFont type=\"lm-player-PrevFast\" onClick={() => api.backWind()} className=\"time-line-action-item\" />\r\n      <Slider className=\"time-line-box\" currentPercent={playPercent} availablePercent={bufferedPercent} onChange={changePlayTime} renderTips={renderTimeLineTips} />\r\n      <IconFont type=\"lm-player-NextFast_Light\" onClick={() => api.fastForward()} className=\"time-line-action-item\" />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default TineLine\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport EventName from './eventName'\r\n\r\nfunction ErrorEvent({ event, api, errorReloadTimer, flv, hls, changePlayIndex, isHistory, playIndex }) {\r\n  const [errorTimer, setErrorTime] = useState(0)\r\n  const errorInfo = useRef(null)\r\n  const reloadTimer = useRef(null)\r\n\r\n  useEffect(() => {\r\n    const errorHandle = (...args) => {\r\n      if (args[2] && args[2].msg && args[2].msg.includes('Unsupported audio')) {\r\n        return\r\n      }\r\n      console.error(...args)\r\n      errorInfo.current = args\r\n      setErrorTime(errorTimer + 1)\r\n    }\r\n\r\n    const reloadSuccess = () => {\r\n      if (errorTimer > 0) {\r\n        console.warn('视频重连成功！')\r\n        event.emit(EventName.RELOAD_SUCCESS)\r\n        clearErrorTimer()\r\n      }\r\n    }\r\n    const clearErrorTimer = () => setErrorTime(0)\r\n    try {\r\n      if (flv) {\r\n        flv.on('error', errorHandle)\r\n      }\r\n      if (hls) {\r\n        hls.on('hlsError', errorHandle)\r\n      }\r\n    } catch (e) {\r\n      //\r\n    }\r\n\r\n    if (isHistory) {\r\n      //历史视频切换播放索引时清除错误次数\r\n      event.on(EventName.CHANGE_PLAY_INDEX, clearErrorTimer)\r\n      //历史视频主动清除错误次数\r\n      event.on(EventName.CLEAR_ERROR_TIMER, clearErrorTimer)\r\n    }\r\n    event.addEventListener('error', errorHandle, false)\r\n    //获取video状态清除错误状态\r\n    event.addEventListener('canplay', reloadSuccess, false)\r\n\r\n    return () => {\r\n      try {\r\n        if (flv) {\r\n          flv.off('error', errorHandle)\r\n        }\r\n        if (hls) {\r\n          hls.off('hlsError', errorHandle)\r\n        }\r\n      } catch (e) {\r\n        console.warn(e)\r\n      }\r\n      if (isHistory) {\r\n        event.off(EventName.CHANGE_PLAY_INDEX, clearErrorTimer)\r\n        event.off(EventName.CLEAR_ERROR_TIMER, clearErrorTimer)\r\n      }\r\n      event.removeEventListener('error', errorHandle, false)\r\n      event.removeEventListener('canplay', reloadSuccess, false)\r\n    }\r\n  }, [event, flv, hls, errorTimer])\r\n\r\n  useEffect(() => {\r\n    if (errorTimer === 0) {\r\n      return\r\n    }\r\n    if (errorTimer > errorReloadTimer) {\r\n      isHistory ? changePlayIndex(playIndex + 1) : event.emit(EventName.RELOAD_FAIL)\r\n      api.unload()\r\n      return\r\n    }\r\n\r\n    console.warn(`视频播放出错，正在进行重连${errorTimer}`)\r\n    reloadTimer.current = setTimeout(() => {\r\n      event.emit(EventName.ERROR_RELOAD, errorTimer, ...errorInfo.current)\r\n      api.reload(true)\r\n    }, 2 * 1000)\r\n\r\n    return () => {\r\n      clearTimeout(reloadTimer.current)\r\n    }\r\n  }, [errorTimer, api, event, flv, hls])\r\n\r\n  return <></>\r\n}\r\n\r\nexport default ErrorEvent\r\n","import React from 'react'\r\nimport { computedBound } from '../util'\r\nimport PropTypes from 'prop-types'\r\n\r\nclass DragEvent extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n    const { playContainer } = props\r\n\r\n    this.dragDom = playContainer.querySelector('.player-mask-layout')\r\n    this.position = {\r\n      start: [0, 0],\r\n      end: [0, 0]\r\n    }\r\n  }\r\n  componentDidMount() {\r\n    this.dragDom.addEventListener('mousedown', this.openDrag)\r\n    this.props.event.addEventListener('transform', this.transformChange, true)\r\n  }\r\n  componentWillUnmount() {\r\n    this.dragDom.removeEventListener('mousedown', this.openDrag)\r\n  }\r\n  openDrag = e => {\r\n    this.position.start = [e.pageX, e.pageY]\r\n    this.dragDom.addEventListener('mousemove', this.moveChange)\r\n    document.body.addEventListener('mouseup', this.stopDrag)\r\n  }\r\n  moveChange = e => {\r\n    const { api } = this.props\r\n    const currentPosition = api.getPosition()\r\n    this.position.end = [e.pageX, e.pageY]\r\n    const x = currentPosition[0] + (this.position.end[0] - this.position.start[0])\r\n    const y = currentPosition[1] + (this.position.end[1] - this.position.start[1])\r\n    const position = [x, y]\r\n    api.setPosition(position)\r\n    this.position.start = [e.pageX, e.pageY]\r\n  }\r\n  stopDrag = () => {\r\n    this.dragDom.removeEventListener('mousemove', this.moveChange)\r\n    document.body.removeEventListener('mouseup', this.stopDrag)\r\n    this.transformChange()\r\n  }\r\n  transformChange = () => {\r\n    const { api } = this.props\r\n    let position = computedBound(this.dragDom, api.getPosition(), api.getScale())\r\n    position && api.setPosition(position, true)\r\n  }\r\n\r\n  render() {\r\n    return null\r\n  }\r\n}\r\n\r\nDragEvent.propTypes = {\r\n  api: PropTypes.object,\r\n  event: PropTypes.object,\r\n  playContainer: PropTypes.node,\r\n  playerProps: PropTypes.object\r\n}\r\nexport default DragEvent\r\n","import { fullscreen, isFullscreen, exitFullscreen } from './util'\r\nimport EventName from './event/eventName'\r\n\r\nlet index = 0\r\nexport default class Api {\r\n  constructor({ video, playContainer, event, flv, hls }) {\r\n    this.player = video\r\n    this.playContainer = playContainer\r\n    this.flv = flv\r\n    this.hls = hls\r\n    this.event = event\r\n    this.scale = 1\r\n    this.position = [0, 0]\r\n  }\r\n  /**\r\n   * 播放器销毁后 动态跟新api下的flv，hls对象\r\n   * @param {*} param0\r\n   */\r\n  updateChunk({ flv, hls }) {\r\n    this.flv = flv\r\n    this.hls = hls\r\n  }\r\n  /**\r\n   * 全屏\r\n   */\r\n  requestFullScreen() {\r\n    if (!isFullscreen(this.playContainer)) {\r\n      fullscreen(this.playContainer)\r\n    }\r\n  }\r\n  /**\r\n   * 退出全屏\r\n   */\r\n  cancelFullScreen() {\r\n    if (isFullscreen(this.playContainer)) {\r\n      exitFullscreen()\r\n    }\r\n  }\r\n  play() {\r\n    if (this.player.paused) {\r\n      this.player.play()\r\n    }\r\n  }\r\n  pause() {\r\n    if (!this.player.paused) {\r\n      this.player.pause()\r\n    }\r\n  }\r\n  destroy() {\r\n    this.player.removeAttribute('src')\r\n    this.unload()\r\n    if (this.flv) {\r\n      index++\r\n      this.flv.destroy()\r\n    }\r\n    if (this.hls) {\r\n      index++\r\n      this.hls.destroy()\r\n    }\r\n    this.player = null\r\n    this.playContainer = null\r\n    this.flv = null\r\n    this.hls = null\r\n    this.event = null\r\n    this.scale = null\r\n    this.position = null\r\n    console.warn('destroy', index)\r\n  }\r\n\r\n  /**\r\n   * 设置currentTime实现seek\r\n   * @param {*} seconds\r\n   * @param {*} noEmit\r\n   */\r\n  seekTo(seconds, noEmit) {\r\n    const buffered = this.getBufferedTime()\r\n    if (this.flv && buffered[0] > seconds) {\r\n      this.flv.unload()\r\n      this.flv.load()\r\n    }\r\n    console.log(this.player)\r\n    if (this.player) {\r\n      console.log(this.player.currentTime)\r\n      this.player.currentTime = seconds\r\n      if (!noEmit) {\r\n        this.event.emit(EventName.SEEK, seconds)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 视频重载\r\n   */\r\n  reload(notEmit) {\r\n    if (this.getCurrentTime !== 0) {\r\n      this.seekTo(0)\r\n    }\r\n    if (this.hls) {\r\n      this.hls.swapAudioCodec()\r\n      this.hls.recoverMediaError()\r\n    }\r\n    this.unload()\r\n    this.load()\r\n    this.play()\r\n    !notEmit && this.event.emit(EventName.RELOAD)\r\n  }\r\n  unload() {\r\n    this.flv && this.flv.unload()\r\n    this.hls && this.hls.stopLoad()\r\n  }\r\n  load() {\r\n    if (this.flv) {\r\n      this.flv.load()\r\n    }\r\n    if (this.hls) {\r\n      this.hls.startLoad()\r\n      this.hls.loadSource(this.hls.url)\r\n    }\r\n  }\r\n  setVolume(fraction) {\r\n    this.player.volume = fraction\r\n  }\r\n  mute() {\r\n    this.player.muted = true\r\n  }\r\n  unmute() {\r\n    this.player.muted = false\r\n  }\r\n\r\n  /**\r\n   * 开启画中画功能\r\n   */\r\n  requestPictureInPicture() {\r\n    if (this.player.requestPictureInPicture && document.pictureInPictureElement !== this.player) {\r\n      this.player.requestPictureInPicture()\r\n    }\r\n  }\r\n  /**\r\n   * 关闭画中画功能\r\n   */\r\n  exitPictureInPicture() {\r\n    if (document.exitPictureInPicture && document.pictureInPictureElement === this.player) {\r\n      document.exitPictureInPicture()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置播放速率\r\n   * @param {*} rate\r\n   */\r\n  setPlaybackRate(rate) {\r\n    this.player.playbackRate = rate\r\n  }\r\n  /**\r\n   * 获取视频总时长\r\n   */\r\n  getDuration() {\r\n    if (!this.player) return null\r\n    const { duration, seekable } = this.player\r\n    if (duration === Infinity && seekable.length > 0) {\r\n      return seekable.end(seekable.length - 1)\r\n    }\r\n    return duration\r\n  }\r\n  /**\r\n   * 获取当前播放时间\r\n   */\r\n  getCurrentTime() {\r\n    if (!this.player) return null\r\n    return this.player.currentTime\r\n  }\r\n\r\n  /**\r\n   * 获取缓存时间\r\n   */\r\n  getSecondsLoaded() {\r\n    return this.getBufferedTime()[1]\r\n  }\r\n\r\n  /**\r\n   * 获取当前视频缓存的起止时间\r\n   */\r\n  getBufferedTime() {\r\n    if (!this.player) return []\r\n    const { buffered } = this.player\r\n    if (buffered.length === 0) {\r\n      return [0, 0]\r\n    }\r\n    const end = buffered.end(buffered.length - 1)\r\n    const start = buffered.start(buffered.length - 1)\r\n    const duration = this.getDuration()\r\n    if (end > duration) {\r\n      return duration\r\n    }\r\n    return [start, end]\r\n  }\r\n  /**\r\n   * 快进通过seekTo方法实现\r\n   * @param {*} second\r\n   */\r\n  fastForward(second = 5) {\r\n    const duration = this.getDuration()\r\n    const currentTime = this.getCurrentTime()\r\n    const time = currentTime + second\r\n    this.seekTo(time > duration - 1 ? duration - 1 : time)\r\n  }\r\n\r\n  /**\r\n   * 快退通过seekTo方法实现\r\n   * @param {*} second\r\n   */\r\n  backWind(second = 5) {\r\n    const currentTime = this.getCurrentTime()\r\n    const time = currentTime - second\r\n    this.seekTo(time < 1 ? 1 : time)\r\n  }\r\n\r\n  /**\r\n   * 视频截屏方法\r\n   */\r\n  snapshot() {\r\n    let canvas = document.createElement('canvas')\r\n    let ctx = canvas.getContext('2d')\r\n    canvas.width = this.player.videoWidth\r\n    canvas.height = this.player.videoHeight\r\n    ctx.drawImage(this.player, 0, 0, canvas.width, canvas.height)\r\n    setTimeout(() => {\r\n      canvas.remove()\r\n      canvas = null\r\n      ctx = null\r\n    }, 200)\r\n    return canvas.toDataURL()\r\n  }\r\n  setScale(num, isRest = false) {\r\n    let scale = this.scale + num\r\n    if (isRest) {\r\n      scale = num\r\n    } else {\r\n      if (scale < 1) {\r\n        scale = 1\r\n      }\r\n      if (scale > 3) {\r\n        scale = 3\r\n      }\r\n    }\r\n    this.scale = scale\r\n    this.player.style.transition = 'transform 0.3s'\r\n    this.__setTransform()\r\n    this.event.emit(EventName.TRANSFORM)\r\n    setTimeout(() => {\r\n      this.player.style.transition = 'unset'\r\n    }, 1000)\r\n  }\r\n  getScale() {\r\n    return this.scale\r\n  }\r\n  setPosition(position, isAnimate) {\r\n    this.position = position\r\n    this.player.style.transition = isAnimate ? 'transform 0.3s' : 'unset'\r\n    this.__setTransform()\r\n  }\r\n  getPosition() {\r\n    return this.position\r\n  }\r\n  __setTransform() {\r\n    this.player.style.transform = `scale(${this.scale}) translate(${this.position[0]}px,${this.position[1]}px)`\r\n  }\r\n  getApi() {\r\n    return {\r\n      play: this.play.bind(this),\r\n      reload: this.reload.bind(this),\r\n      pause: this.pause.bind(this),\r\n      seekTo: this.seekTo.bind(this),\r\n      setVolume: this.setVolume.bind(this),\r\n      mute: this.mute.bind(this),\r\n      unmute: this.unmute.bind(this),\r\n      requestPictureInPicture: this.requestPictureInPicture.bind(this),\r\n      exitPictureInPicture: this.exitPictureInPicture.bind(this),\r\n      setPlaybackRate: this.setPlaybackRate.bind(this),\r\n      destroy: this.destroy.bind(this),\r\n      getDuration: this.getDuration.bind(this),\r\n      getCurrentTime: this.getCurrentTime.bind(this),\r\n      getSecondsLoaded: this.getSecondsLoaded.bind(this),\r\n      getBufferedTime: this.getBufferedTime.bind(this),\r\n      fastForward: this.fastForward.bind(this),\r\n      backWind: this.backWind.bind(this),\r\n      snapshot: this.snapshot.bind(this),\r\n      requestFullScreen: this.requestFullScreen.bind(this),\r\n      cancelFullScreen: this.cancelFullScreen.bind(this),\r\n      __player: this.player,\r\n      flv: this.flv,\r\n      hls: this.hls,\r\n    }\r\n  }\r\n}\r\n","function getHiddenProp() {\r\n  const prefixes = [\"webkit\", \"moz\", \"ms\", \"o\"];\r\n  // 如果hidden 属性是原生支持的，我们就直接返回\r\n  if (\"hidden\" in document) {\r\n    return \"hidden\";\r\n  }\r\n\r\n  // 其他的情况就循环现有的浏览器前缀，拼接我们所需要的属性\r\n  for (let i = 0; i < prefixes.length; i++) {\r\n    // 如果当前的拼接的前缀在 document对象中存在 返回即可\r\n    if (prefixes[i] + \"Hidden\" in document) {\r\n      return prefixes[i] + \"Hidden\";\r\n    }\r\n  }\r\n\r\n  // 其他的情况 直接返回null\r\n  return null;\r\n}\r\n\r\nfunction getVisibilityState() {\r\n  const prefixes = [\"webkit\", \"moz\", \"ms\", \"o\"];\r\n\r\n  if (\"visibilityState\" in document) {\r\n    return \"visibilityState\";\r\n  }\r\n\r\n  for (let i = 0; i < prefixes.length; i++) {\r\n    if (prefixes[i] + \"VisibilityState\" in document) {\r\n      return prefixes[i] + \"VisibilityState\";\r\n    }\r\n  }\r\n  // 找不到返回 null\r\n  return null;\r\n}\r\n\r\nfunction visibilityState() {\r\n  return document[getVisibilityState()];\r\n}\r\n\r\nfunction addEventListener(listener) {\r\n  const visProp = getHiddenProp();\r\n  const evtname = visProp.replace(/[H|h]idden/, \"\") + \"visibilitychange\";\r\n  document.addEventListener(evtname, listener, false);\r\n}\r\n\r\nfunction removeEventListener(listener) {\r\n  const visProp = getHiddenProp();\r\n  const evtname = visProp.replace(/[H|h]idden/, \"\") + \"visibilitychange\";\r\n  document.removeEventListener(evtname, listener, false);\r\n}\r\n\r\nexport default {\r\n  addEventListener,\r\n  removeEventListener,\r\n  visibilityState\r\n};\r\n","import React, { useEffect } from 'react'\r\nimport BrowserTab from './event/browserTabEvent'\r\n\r\nfunction LiveHeart({ api }) {\r\n  useEffect(() => {\r\n    const browserTabChange = function() {\r\n      if (BrowserTab.visibilityState() === 'visible') {\r\n        const current = api.getCurrentTime()\r\n        const buffered = api.getSecondsLoaded()\r\n        if (buffered - current > 5) {\r\n          console.warn(`当前延时过大current->${current} buffered->${buffered}, 基于视频当前缓存时间更新当前播放时间 updateTime -> ${buffered - 2}`)\r\n          api.seekTo(buffered - 2 > 0 ? buffered - 2 : 0)\r\n        }\r\n      }\r\n    }\r\n    BrowserTab.addEventListener(browserTabChange)\r\n    return () => {\r\n      BrowserTab.removeEventListener(browserTabChange)\r\n    }\r\n  }, [api])\r\n  return <></>\r\n}\r\n\r\nexport default LiveHeart\r\n","import React, { useRef, useEffect, useState } from 'react';\r\nimport VideoEvent from './event';\r\nimport { getVideoType, createFlvPlayer, createHlsPlayer } from './util';\r\nimport ContrallerBar from './contraller_bar';\r\nimport ContrallerEvent from './event/contrallerEvent';\r\nimport VideoMessage, { NoSource } from './message';\r\nimport TimeLine from './time_line';\r\nimport ErrorEvent from './event/errorEvent';\r\nimport DragEvent from './event/dragEvent';\r\nimport Api from './api';\r\nimport LiveHeart from './live_heart';\r\nimport PropTypes from 'prop-types';\r\nimport './style/index.less';\r\n\r\nfunction SinglePlayer({ type, file, className, autoPlay, muted, poster, playsinline, loop, preload, children, onInitPlayer, ...props }) {\r\n  const playContainerRef = useRef(null);\r\n  const [playerObj, setPlayerObj] = useState(null);\r\n  const playerRef = useRef(null);\r\n\r\n  useEffect(\r\n    () => () => {\r\n      if (playerRef.current && playerRef.current.event) {\r\n        playerRef.current.event.destroy();\r\n      }\r\n      if (playerRef.current && playerRef.current.api) {\r\n        playerRef.current.api.destroy();\r\n      }\r\n      playerRef.current = null;\r\n    },\r\n    [file]\r\n  );\r\n  useEffect(() => {\r\n    if (!file) {\r\n      return;\r\n    }\r\n    const playerObject = {\r\n      playContainer: playContainerRef.current,\r\n      video: playContainerRef.current.querySelector('video'),\r\n    };\r\n    let isInit = false;\r\n    const formartType = getVideoType(file);\r\n    if (formartType === 'flv' || type === 'flv') {\r\n      isInit = true;\r\n      playerObject.flv = createFlvPlayer(playerObject.video, { ...props, file });\r\n    }\r\n    if (formartType === 'm3u8' || type === 'hls') {\r\n      isInit = true;\r\n      playerObject.hls = createHlsPlayer(playerObject.video, file);\r\n    }\r\n    if (!isInit && (!['flv', 'm3u8'].includes(formartType) || type === 'native')) {\r\n      playerObject.video.src = file;\r\n    }\r\n    if (playerObject.event) {\r\n      playerObject.event.destroy();\r\n    }\r\n    playerObject.event = new VideoEvent(playerObject.video);\r\n    if (playerObject.api) {\r\n      playerObject.api.destroy();\r\n    }\r\n    playerObject.api = new Api(playerObject);\r\n    playerRef.current = playerObject;\r\n    setPlayerObj(() => playerObject);\r\n\r\n    if (onInitPlayer) {\r\n      onInitPlayer(Object.assign({}, playerObject.api.getApi(), playerObject.event.getApi()));\r\n    }\r\n  }, [file]);\r\n  return (\r\n    <div className={`lm-player-container ${className}`} ref={playContainerRef}>\r\n      <div className=\"player-mask-layout\">\r\n        <video autoPlay={autoPlay} preload={preload} muted={muted} poster={poster} controls={false} playsInline={playsinline} loop={loop} />\r\n      </div>\r\n      <VideoTools\r\n        playerObj={playerObj}\r\n        isLive={props.isLive}\r\n        key={file}\r\n        hideContrallerBar={props.hideContrallerBar}\r\n        errorReloadTimer={props.errorReloadTimer}\r\n        scale={props.scale}\r\n        snapshot={props.snapshot}\r\n        leftExtContents={props.leftExtContents}\r\n        leftMidExtContents={props.leftMidExtContents}\r\n        rightExtContents={props.rightExtContents}\r\n        rightMidExtContents={props.rightMidExtContents}\r\n        draggable={props.draggable}\r\n      />\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction VideoTools({\r\n  playerObj,\r\n  draggable,\r\n  isLive,\r\n  hideContrallerBar,\r\n  scale,\r\n  snapshot,\r\n  leftExtContents,\r\n  leftMidExtContents,\r\n  rightExtContents,\r\n  rightMidExtContents,\r\n  errorReloadTimer,\r\n}) {\r\n  if (!playerObj) {\r\n    return <NoSource />;\r\n  }\r\n  return (\r\n    <>\r\n      <VideoMessage api={playerObj.api} event={playerObj.event} />\r\n      {draggable && <DragEvent playContainer={playerObj.playContainer} api={playerObj.api} event={playerObj.event} />}\r\n      {!hideContrallerBar && (\r\n        <ContrallerEvent event={playerObj.event} playContainer={playerObj.playContainer}>\r\n          <ContrallerBar\r\n            api={playerObj.api}\r\n            event={playerObj.event}\r\n            playContainer={playerObj.playContainer}\r\n            video={playerObj.video}\r\n            snapshot={snapshot}\r\n            rightExtContents={rightExtContents}\r\n            rightMidExtContents={rightMidExtContents}\r\n            scale={scale}\r\n            isHistory={false}\r\n            isLive={isLive}\r\n            leftExtContents={leftExtContents}\r\n            leftMidExtContents={leftMidExtContents}\r\n          />\r\n          {!isLive && <TimeLine api={playerObj.api} event={playerObj.event} />}\r\n        </ContrallerEvent>\r\n      )}\r\n      <ErrorEvent flv={playerObj.flv} hls={playerObj.hls} api={playerObj.api} event={playerObj.event} errorReloadTimer={errorReloadTimer} />\r\n      {isLive && <LiveHeart api={playerObj.api} />}\r\n    </>\r\n  );\r\n}\r\n\r\nSinglePlayer.propTypes = {\r\n  file: PropTypes.string.isRequired, //播放地址 必填\r\n  isLive: PropTypes.bool, //是否实时视频\r\n  errorReloadTimer: PropTypes.number, //视频错误重连次数\r\n  type: PropTypes.oneOf(['flv', 'hls', 'native']), //强制视频流类型\r\n  onInitPlayer: PropTypes.func,\r\n  draggable: PropTypes.bool,\r\n  hideContrallerBar: PropTypes.bool,\r\n  scale: PropTypes.bool,\r\n  muted: PropTypes.string,\r\n  autoPlay: PropTypes.bool,\r\n  playsInline: PropTypes.bool,\r\n  preload: PropTypes.string,\r\n  poster: PropTypes.string,\r\n  loop: PropTypes.bool,\r\n  snapshot: PropTypes.func,\r\n  className: PropTypes.string,\r\n  rightExtContents: PropTypes.element,\r\n  rightMidExtContents: PropTypes.element,\r\n  leftExtContents: PropTypes.element,\r\n  leftMidExtContents: PropTypes.element,\r\n  flvOptions: PropTypes.object,\r\n  flvConfig: PropTypes.object,\r\n  children: PropTypes.element,\r\n};\r\nSinglePlayer.defaultProps = {\r\n  isLive: true,\r\n  draggable: true,\r\n  scale: true,\r\n  errorReloadTimer: 5,\r\n  muted: 'muted',\r\n  autoPlay: true,\r\n  playsInline: false,\r\n  preload: 'auto',\r\n  loop: false,\r\n  hideContrallerBar: false,\r\n};\r\n\r\nexport default SinglePlayer;\r\n","export const computedIndexFormTime = (historyList, time) => {\r\n  let index = 0\r\n  try {\r\n    index = historyList.fragments.findIndex((v) => v.end > time)\r\n  } catch (e) {\r\n    console.error('historyList data error', historyList)\r\n  }\r\n  return index\r\n}\r\nexport const computedTimeAndIndex = (historyList, currentTime) => {\r\n  const index = computedIndexFormTime(historyList, currentTime)\r\n  let seekTime = 0\r\n  try {\r\n    const fragment = historyList.fragments[index]\r\n    if (!fragment) {\r\n      return [0, 0]\r\n    }\r\n    seekTime = currentTime - fragment.begin - 1\r\n  } catch (e) {\r\n    console.error('historyList data error', historyList)\r\n  }\r\n  return [index, seekTime]\r\n}\r\n","import React, { useState, useEffect, useMemo, useCallback } from 'react'\r\nimport IconFont from '../iconfont'\r\nimport Slider from '../slider'\r\nimport { dateFormat } from '../util'\r\nimport EventName from '../event/eventName'\r\nimport PropTypes from 'prop-types'\r\nimport { computedTimeAndIndex } from './utils'\r\nimport '../style/time-line.less'\r\n\r\nconst computedLineList = (historyList) => {\r\n  const duration = historyList.duration\r\n  return historyList.fragments.map((v) => {\r\n    return {\r\n      disabled: !v.file,\r\n      size: ((v.end - v.begin) / duration) * 100,\r\n    }\r\n  })\r\n}\r\n\r\nfunction TineLine({ event, api, visibel, historyList, playIndex, seekTo, defaultTime }) {\r\n  const [state, setState] = useState({ duration: 1, currentTime: defaultTime, buffered: 0, isEnd: false })\r\n\r\n  useEffect(() => setState((old) => ({ ...old, currentTime: defaultTime })), [defaultTime])\r\n\r\n  useEffect(() => {\r\n    const getDuration = () => setState((old) => ({ ...old, duration: api.getDuration() }))\r\n    const getCurrentTime = () => setState((old) => ({ ...old, currentTime: api.getCurrentTime(), buffered: api.getSecondsLoaded() }))\r\n    const getBuffered = () => setState((old) => ({ ...old, buffered: api.getSecondsLoaded() }))\r\n    const historyPlayEnd = () => setState((old) => ({ ...old, isEnd: true }))\r\n    const reload = () => setState((old) => ({ ...old, isEnd: false, currentTime: api.getCurrentTime() }))\r\n    const seekendPlay = () => api.play()\r\n\r\n    event.addEventListener('loadedmetadata', getDuration)\r\n    event.addEventListener('durationchange', getDuration)\r\n    event.addEventListener('timeupdate', getCurrentTime)\r\n    event.addEventListener('progress', getBuffered)\r\n    event.addEventListener('suspend', getBuffered)\r\n    event.addEventListener('seeked', seekendPlay)\r\n    event.on(EventName.HISTORY_PLAY_END, historyPlayEnd)\r\n    event.on(EventName.RELOAD, reload)\r\n\r\n    return () => {\r\n      event.removeEventListener('loadedmetadata', getDuration)\r\n      event.removeEventListener('durationchange', getDuration)\r\n      event.removeEventListener('timeupdate', getCurrentTime)\r\n      event.removeEventListener('progress', getBuffered)\r\n      event.removeEventListener('suspend', getBuffered)\r\n      event.removeEventListener('seeked', seekendPlay)\r\n      event.off(EventName.HISTORY_PLAY_END, historyPlayEnd)\r\n      event.off(EventName.RELOAD, reload)\r\n    }\r\n  }, [event, api])\r\n\r\n  const changePlayTime = useCallback(\r\n    (percent) => {\r\n      const currentTime = percent * historyList.duration //修正一下误差\r\n      const [index, time] = computedTimeAndIndex(historyList, currentTime)\r\n      console.log(index, time)\r\n      seekTo(currentTime, index)\r\n      setState((old) => ({ ...old, currentTime: time, isEnd: false }))\r\n    },\r\n    [historyList]\r\n  )\r\n\r\n  const renderTimeLineTips = (percent) => {\r\n    const currentTime = percent * historyList.duration * 1000\r\n    const date = dateFormat(historyList.beginDate + currentTime)\r\n    return <span>{date}</span>\r\n  }\r\n\r\n  const { currentTime, buffered, isEnd } = state\r\n  const lineList = useMemo(() => computedLineList(historyList), [historyList])\r\n  const currentLine = useMemo(() => lineList.filter((_, i) => i < playIndex).map((v) => v.size), [playIndex, lineList])\r\n  const currentIndexTime = useMemo(() => (currentLine.length === 0 ? 0 : currentLine.length > 1 ? currentLine.reduce((p, c) => p + c) : currentLine[0]), [currentLine])\r\n  const playPercent = useMemo(() => (currentTime / historyList.duration) * 100 + currentIndexTime, [currentIndexTime, historyList, currentTime])\r\n  const bufferedPercent = useMemo(() => (buffered / historyList.duration) * 100 + currentIndexTime, [historyList, currentIndexTime, buffered])\r\n\r\n  return (\r\n    <div className={`video-time-line-layout ${!visibel ? 'hide-time-line' : ''}`}>\r\n      <IconFont type=\"lm-player-PrevFast\" onClick={() => api.backWind()} className=\"time-line-action-item\" />\r\n      <Slider className=\"time-line-box\" currentPercent={isEnd ? '100' : playPercent} availablePercent={bufferedPercent} onChange={changePlayTime} renderTips={renderTimeLineTips}>\r\n        <>\r\n          {lineList.map((v, i) => {\r\n            const currentSizeLine = lineList.filter((v, i2) => i2 < i).map((v) => v.size)\r\n            const currentIndexSize = currentSizeLine.length === 0 ? 0 : currentSizeLine.length > 1 ? currentSizeLine.reduce((p, c) => p + c) : currentSizeLine[0]\r\n            return (\r\n              <div className={`history-time-line-item ${v.disabled ? 'history-time-line-disabled' : ''}`} key={i} style={{ width: `${v.size}%`, left: `${currentIndexSize}%` }} />\r\n            )\r\n          })}\r\n        </>\r\n      </Slider>\r\n      <IconFont type=\"lm-player-NextFast_Light\" onClick={() => api.fastForward()} className=\"time-line-action-item\" />\r\n    </div>\r\n  )\r\n}\r\n\r\nTineLine.propTypes = {\r\n  event: PropTypes.object,\r\n  api: PropTypes.object,\r\n  changePlayIndex: PropTypes.func,\r\n  playIndex: PropTypes.number,\r\n  historyList: PropTypes.array,\r\n  seekTo: PropTypes.func,\r\n  visibel: PropTypes.bool,\r\n}\r\n\r\nexport default TineLine\r\n","/**\r\n * history下使用 用户切换下个播放地址\r\n */\r\n\r\nimport React, { useEffect } from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nfunction PlayEnd({ event, changePlayIndex, playIndex }) {\r\n  useEffect(() => {\r\n    const endedHandle = () => changePlayIndex(playIndex + 1)\r\n    event.addEventListener('ended', endedHandle, false)\r\n    return () => {\r\n      event.removeEventListener('ended', endedHandle, false)\r\n    }\r\n  }, [event, playIndex, changePlayIndex])\r\n  return <></>\r\n}\r\n\r\nPlayEnd.propTypes = {\r\n  event: PropTypes.object,\r\n  changePlayIndex: PropTypes.func,\r\n  playIndex: PropTypes.number,\r\n}\r\nexport default PlayEnd\r\n","import React, { useRef, useState, useCallback, useEffect, useMemo } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport ContrallerBar from '../contraller_bar';\r\nimport VideoMessage, { NoSource } from '../message';\r\nimport HistoryTimeLine from './time_line_history';\r\nimport ErrorEvent from '../event/errorEvent';\r\nimport DragEvent from '../event/dragEvent';\r\nimport Api from '../api';\r\nimport VideoEvent from '../event';\r\nimport PlayEnd from './play_end';\r\nimport EventName from '../event/eventName';\r\nimport ContrallerEvent from '../event/contrallerEvent';\r\nimport { getVideoType, createFlvPlayer, createHlsPlayer } from '../util';\r\nimport { computedTimeAndIndex } from './utils';\r\n\r\nfunction HistoryPlayer({ type, historyList, defaultTime, className, autoPlay, muted, poster, playsinline, loop, preload, children, onInitPlayer, ...props }) {\r\n  const playContainerRef = useRef(null);\r\n  const [playerObj, setPlayerObj] = useState(null);\r\n  const playerRef = useRef(null);\r\n  const [playStatus, setPlayStatus] = useState(() => computedTimeAndIndex(historyList, defaultTime));\r\n  const playIndex = useMemo(() => playStatus[0], [playStatus]);\r\n  const defaultSeekTime = useMemo(() => playStatus[1], [playStatus]);\r\n  const file = useMemo(() => {\r\n    let url;\r\n    try {\r\n      url = historyList.fragments[playIndex].file;\r\n    } catch (e) {\r\n      console.warn('未找打播放地址！', historyList);\r\n    }\r\n    return url;\r\n  }, [historyList, playIndex]);\r\n\r\n  /**\r\n   * 重写api下的seekTo方法\r\n   */\r\n  const seekTo = useCallback(\r\n    (currentTime) => {\r\n      const [index, seekTime] = computedTimeAndIndex(historyList, currentTime);\r\n      if (playerRef.current.event && playerRef.current.api) {\r\n        //判断是否需要更新索引\r\n        setPlayStatus((old) => {\r\n          if (old[0] !== index) {\r\n            return [index, seekTime];\r\n          } else {\r\n            playerRef.current.api.seekTo(seekTime, true);\r\n            return old;\r\n          }\r\n        });\r\n      }\r\n    },\r\n    [playIndex, historyList]\r\n  );\r\n\r\n  const changePlayIndex = useCallback(\r\n    (index) => {\r\n      if (index > historyList.fragments.length - 1) {\r\n        return playerRef.current && playerRef.current.event && playerRef.current.event.emit(EventName.HISTORY_PLAY_END);\r\n      }\r\n\r\n      if (!historyList.fragments[index].file) {\r\n        return changePlayIndex(index + 1);\r\n      }\r\n\r\n      if (playerRef.current && playerRef.current.event) {\r\n        playerRef.current.event.emit(EventName.CHANGE_PLAY_INDEX, index);\r\n      }\r\n      setPlayStatus([index, 0]);\r\n    },\r\n    [historyList]\r\n  );\r\n\r\n  const reloadHistory = useCallback(() => {\r\n    if (playStatus[0] === 0) {\r\n      playerRef.current.api.seekTo(defaultSeekTime);\r\n    }\r\n    setPlayStatus([0, 0]);\r\n\r\n    playerRef.current.event.emit(EventName.RELOAD);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!file) {\r\n      changePlayIndex(playIndex + 1);\r\n    }\r\n  }, [file, playIndex, historyList]);\r\n\r\n  useEffect(\r\n    () => () => {\r\n      if (playerRef.current && playerRef.current.event) {\r\n        playerRef.current.event.destroy();\r\n      }\r\n      if (playerRef.current && playerRef.current.api) {\r\n        playerRef.current.api.destroy();\r\n      }\r\n      playerRef.current = null;\r\n    },\r\n    [file]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (!file) {\r\n      return;\r\n    }\r\n    const playerObject = {\r\n      playContainer: playContainerRef.current,\r\n      video: playContainerRef.current.querySelector('video'),\r\n    };\r\n    let isInit = false;\r\n    const formartType = getVideoType(file);\r\n    if (formartType === 'flv' || type === 'flv') {\r\n      isInit = true;\r\n      playerObject.flv = createFlvPlayer(playerObject.video, { ...props, file });\r\n    }\r\n    if (formartType === 'm3u8' || type === 'hls') {\r\n      isInit = true;\r\n      playerObject.hls = createHlsPlayer(playerObject.video, file);\r\n    }\r\n    if (!isInit && (!['flv', 'm3u8'].includes(formartType) || type === 'native')) {\r\n      playerObject.video.src = file;\r\n    }\r\n    if (playerObject.event) {\r\n      playerObject.event.destroy();\r\n    }\r\n    playerObject.event = new VideoEvent(playerObject.video);\r\n    if (playerObject.api) {\r\n      playerObject.api.destroy();\r\n    }\r\n    playerObject.api = new Api(playerObject);\r\n    playerRef.current = playerObject;\r\n    setPlayerObj(playerObject);\r\n    if (defaultSeekTime) {\r\n      playerObject.api.seekTo(defaultSeekTime);\r\n    }\r\n    if (onInitPlayer) {\r\n      onInitPlayer(Object.assign({}, playerObject.api.getApi(), playerObject.event.getApi(), { seekTo, changePlayIndex, reload: reloadHistory }));\r\n    }\r\n  }, [historyList, file]);\r\n\r\n  return (\r\n    <div className={`lm-player-container ${className}`} ref={playContainerRef}>\r\n      <div className=\"player-mask-layout\">\r\n        <video autoPlay={autoPlay} preload={preload} muted={muted} poster={poster} controls={false} playsInline={playsinline} loop={loop} />\r\n      </div>\r\n      <VideoTools\r\n        defaultTime={defaultSeekTime}\r\n        playerObj={playerObj}\r\n        isLive={props.isLive}\r\n        hideContrallerBar={props.hideContrallerBar}\r\n        errorReloadTimer={props.errorReloadTimer}\r\n        scale={props.scale}\r\n        snapshot={props.snapshot}\r\n        leftExtContents={props.leftExtContents}\r\n        leftMidExtContents={props.leftMidExtContents}\r\n        rightExtContents={props.rightExtContents}\r\n        rightMidExtContents={props.rightMidExtContents}\r\n        draggable={props.draggable}\r\n        changePlayIndex={changePlayIndex}\r\n        reloadHistory={reloadHistory}\r\n        historyList={historyList}\r\n        playIndex={playIndex}\r\n        seekTo={seekTo}\r\n        key={file}\r\n      />\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction VideoTools({\r\n  playerObj,\r\n  draggable,\r\n  isLive,\r\n  hideContrallerBar,\r\n  scale,\r\n  snapshot,\r\n  leftExtContents,\r\n  leftMidExtContents,\r\n  rightExtContents,\r\n  rightMidExtContents,\r\n  errorReloadTimer,\r\n  changePlayIndex,\r\n  reloadHistory,\r\n  historyList,\r\n  seekTo,\r\n  playIndex,\r\n  defaultTime,\r\n}) {\r\n  if (!playerObj) {\r\n    return <NoSource />;\r\n  }\r\n  return (\r\n    <>\r\n      <VideoMessage api={playerObj.api} event={playerObj.event} />\r\n      {draggable && <DragEvent playContainer={playerObj.playContainer} api={playerObj.api} event={playerObj.event} />}\r\n      {!hideContrallerBar && (\r\n        <ContrallerEvent event={playerObj.event} playContainer={playerObj.playContainer}>\r\n          <ContrallerBar\r\n            api={playerObj.api}\r\n            event={playerObj.event}\r\n            playContainer={playerObj.playContainer}\r\n            video={playerObj.video}\r\n            snapshot={snapshot}\r\n            rightExtContents={rightExtContents}\r\n            rightMidExtContents={rightMidExtContents}\r\n            scale={scale}\r\n            isHistory={true}\r\n            isLive={isLive}\r\n            leftExtContents={leftExtContents}\r\n            leftMidExtContents={leftMidExtContents}\r\n            reloadHistory={reloadHistory}\r\n          />\r\n          <HistoryTimeLine\r\n            defaultTime={defaultTime}\r\n            changePlayIndex={changePlayIndex}\r\n            historyList={historyList}\r\n            playIndex={playIndex}\r\n            seekTo={seekTo}\r\n            api={playerObj.api}\r\n            event={playerObj.event}\r\n          />\r\n        </ContrallerEvent>\r\n      )}\r\n      <ErrorEvent\r\n        changePlayIndex={changePlayIndex}\r\n        playIndex={playIndex}\r\n        isHistory={true}\r\n        flv={playerObj.flv}\r\n        hls={playerObj.hls}\r\n        api={playerObj.api}\r\n        event={playerObj.event}\r\n        errorReloadTimer={errorReloadTimer}\r\n      />\r\n      <PlayEnd event={playerObj.event} changePlayIndex={changePlayIndex} playIndex={playIndex} />\r\n    </>\r\n  );\r\n}\r\n\r\nHistoryPlayer.propTypes = {\r\n  historyList: PropTypes.object.isRequired, //播放地址 必填\r\n  errorReloadTimer: PropTypes.number, //视频错误重连次数\r\n  type: PropTypes.oneOf(['flv', 'hls', 'native']), //强制视频流类型\r\n  onInitPlayer: PropTypes.func,\r\n  isDraggable: PropTypes.bool,\r\n  isScale: PropTypes.bool,\r\n  muted: PropTypes.string,\r\n  autoPlay: PropTypes.bool,\r\n  playsInline: PropTypes.bool,\r\n  preload: PropTypes.string,\r\n  poster: PropTypes.string,\r\n  loop: PropTypes.bool,\r\n  defaultTime: PropTypes.number,\r\n  className: PropTypes.string,\r\n  playsinline: PropTypes.bool,\r\n  children: PropTypes.any,\r\n  autoplay: PropTypes.bool,\r\n  rightExtContents: PropTypes.element,\r\n  rightMidExtContents: PropTypes.element,\r\n  leftExtContents: PropTypes.element,\r\n  leftMidExtContents: PropTypes.element,\r\n  flvOptions: PropTypes.object,\r\n  flvConfig: PropTypes.object,\r\n};\r\nHistoryPlayer.defaultProps = {\r\n  draggable: true,\r\n  scale: true,\r\n  errorReloadTimer: 5,\r\n  muted: 'muted',\r\n  autoPlay: true,\r\n  playsInline: false,\r\n  preload: 'auto',\r\n  loop: false,\r\n  defaultTime: 0,\r\n  historyList: { beginDate: 0, duration: 0, fragments: [] },\r\n};\r\n\r\nexport default HistoryPlayer;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport Player from \"./player\";\r\nimport HistoryPlayer from \"./history\";\r\n\r\nexport function createPlayer({ container, children, onInitPlayer, ...props }) {\r\n  ReactDOM.render(\r\n    <Player\r\n      {...props}\r\n      onInitPlayer={player => {\r\n        player.destroy = function() {\r\n          ReactDOM.unmountComponentAtNode(container);\r\n        };\r\n        onInitPlayer && onInitPlayer(player);\r\n      }}\r\n    >\r\n      {children}\r\n    </Player>,\r\n    container\r\n  );\r\n}\r\nexport function createHistoryPlayer({ container, children, onInitPlayer, ...props }) {\r\n  ReactDOM.render(\r\n    <HistoryPlayer\r\n      {...props}\r\n      onInitPlayer={player => {\r\n        player.destroy = function() {\r\n          ReactDOM.unmountComponentAtNode(container);\r\n        };\r\n        onInitPlayer && onInitPlayer(player);\r\n      }}\r\n    >\r\n      {children}\r\n    </HistoryPlayer>,\r\n    container\r\n  );\r\n}\r\n"],"names":["VideoEventInstance","constructor","video","events","playerEvents","on","eventName","handle","listener","push","type","addEventListener","removeEventListener","index","findIndex","v","splice","emit","data","forEach","off","getApi","bind","destroy","Object","keys","key","fn","createHlsPlayer","file","Hls","player","liveDurationInfinity","levelLoadingTimeOut","fragLoadingTimeOut","enableWorker","loadSource","attachMedia","createFlvPlayer","options","flvOptions","flvConfig","flvjs","isSupported","createPlayer","assign","url","enableStashBuffer","stashInitialSize","isLive","attachMediaElement","load","getVideoType","indexOf","timeStamp","second_time","time","Math","ceil","second","min","floor","hour","dateFormat","timetemp","date","Date","YYYY","getFullYear","DD","getDate","MM","getMonth","hh","getHours","mm","getMinutes","ss","getSeconds","fullscreen","element","requestFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen","exitFullscreen","document","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen","isFullscreen","ele","fullscreenElement","msFullscreenElement","mozFullScreenElement","webkitFullscreenElement","fullScreenListener","isAdd","fullscreenchange","funcName","fullScreenEvents","map","computedBound","currentPosition","scale","eleRect","getBoundingClientRect","w","width","h","height","lx","ly","x","y","IconFont","className","props","React","propTypes","PropTypes","string","Slider","Component","renderSliderTips","e","renderTips","clearTimeout","timer","setTimeout","top","layoutDom","tipsX","pageX","percent","setState","tipsY","showTips","tempValue","hideSliderTips","cancelPropagation","stopPropagation","startDrag","dragFlag","body","moveChange","stopDrag","computedPositionForEvent","value","state","onChange","changeCurrentValue","event","sliderDomRef","createRef","lineDom","dragDom","currentPercent","UNSAFE_componentWillReceiveProps","nextProps","componentDidMount","current","querySelector","componentWillUnmount","dx","render","availablePercent","children","left","number","seekTo","func","any","defaultProps","Tips","getContainer","visibel","style","useRef","createElement","useEffect","box","appendChild","removeChild","ReactDOM","createPortal","bool","Bar","RELOAD","RELOAD_FAIL","RELOAD_SUCCESS","ERROR","ERROR_RELOAD","HISTORY_PLAY_END","SEEK","TRANSFORM","CHANGE_PLAY_INDEX","HIDE_CONTRALLER","SHOW_CONTRALLER","CLEAR_ERROR_TIMER","LeftBar","api","isHistory","reloadHistory","leftExtContents","leftMidExtContents","openSliderVolume","setOpenSliderVolume","useState","dep","setDep","now","updateRender","paused","useMemo","statusIconClassName","statusText","volumeVal","muted","volume","volumeIcon","volumePercent","sliderClassName","changePlayStatus","useCallback","play","pause","mutedChantgeStatus","unmute","mute","onChangeVolume","setVolume","parseFloat","toFixed","reload","EventName","precent","round","object","playerProps","node","RightBar","playContainer","snapshot","rightExtContents","rightMidExtContents","update","isfull","cancelFullScreen","setScale","args","position","getPosition","getScale","setPosition","ScaleBar","ContrallerBar","ContrallerEvent","setVisibel","showContraller","hideContraller","Children","child","isValidElement","cloneElement","VideoMessage","status","errorTimer","loading","message","openLoading","old","closeLoading","errorReload","reloadFail","reloadSuccess","playEnd","NoSource","fontSize","TineLine","duration","currentTime","buffered","getDuration","getCurrentTime","getSecondsLoaded","getBuffered","seekendPlay","playPercent","bufferedPercent","changePlayTime","renderTimeLineTips","backWind","fastForward","ErrorEvent","errorReloadTimer","flv","hls","changePlayIndex","playIndex","setErrorTime","errorInfo","reloadTimer","errorHandle","msg","includes","console","error","warn","clearErrorTimer","unload","DragEvent","openDrag","start","pageY","end","transformChange","Api","updateChunk","removeAttribute","seconds","noEmit","getBufferedTime","log","notEmit","swapAudioCodec","recoverMediaError","stopLoad","startLoad","fraction","requestPictureInPicture","pictureInPictureElement","exitPictureInPicture","setPlaybackRate","rate","playbackRate","seekable","Infinity","length","canvas","ctx","getContext","videoWidth","videoHeight","drawImage","remove","toDataURL","num","isRest","transition","__setTransform","isAnimate","transform","__player","getHiddenProp","prefixes","i","getVisibilityState","visibilityState","visProp","evtname","replace","LiveHeart","browserTabChange","BrowserTab","SinglePlayer","autoPlay","poster","playsinline","loop","preload","onInitPlayer","playContainerRef","playerObj","setPlayerObj","playerRef","playerObject","isInit","formartType","src","VideoEvent","hideContrallerBar","draggable","VideoTools","TimeLine","isRequired","oneOf","playsInline","computedIndexFormTime","historyList","fragments","computedTimeAndIndex","seekTime","fragment","begin","computedLineList","disabled","size","defaultTime","isEnd","historyPlayEnd","beginDate","lineList","currentLine","filter","_","currentIndexTime","reduce","p","c","currentSizeLine","i2","currentIndexSize","array","PlayEnd","endedHandle","HistoryPlayer","playStatus","setPlayStatus","defaultSeekTime","HistoryTimeLine","isDraggable","isScale","autoplay","container","Player","unmountComponentAtNode","createHistoryPlayer"],"mappings":"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"}