{"version":3,"sources":["webpack://LMPlayer/webpack/universalModuleDefinition","webpack://LMPlayer/webpack/bootstrap","webpack://LMPlayer/external {\"commonjs\":\"react\",\"commonjs2\":\"react\",\"amd\":\"react\",\"root\":\"React\"}","webpack://LMPlayer/external {\"commonjs\":\"react-dom\",\"commonjs2\":\"react-dom\",\"amd\":\"react-dom\",\"root\":\"ReactDOM\"}","webpack://LMPlayer/external {\"commonjs\":\"hls.js\",\"commonjs2\":\"hls.js\",\"amd\":\"hls.js\",\"root\":\"Hls\"}","webpack://LMPlayer/external {\"commonjs\":\"flv.js\",\"commonjs2\":\"flv.js\",\"amd\":\"flv.js\",\"root\":\"flvjs\"}","webpack://LMPlayer/./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack://LMPlayer/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://LMPlayer/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://LMPlayer/./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack://LMPlayer/./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack://LMPlayer/./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://LMPlayer/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://LMPlayer/./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack://LMPlayer/./src/event/index.js","webpack://LMPlayer/./src/util.js","webpack://LMPlayer/./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","webpack://LMPlayer/./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack://LMPlayer/./src/context.js","webpack://LMPlayer/./src/iconfont.js","webpack://LMPlayer/./src/slider.js","webpack://LMPlayer/./src/contraller_bar/bar.js","webpack://LMPlayer/./src/event/eventName.js","webpack://LMPlayer/./src/contraller_bar/left_bar.js","webpack://LMPlayer/./src/contraller_bar/right_bar.js","webpack://LMPlayer/./src/contraller_bar/index.js","webpack://LMPlayer/./src/event/contrallerEvent.js","webpack://LMPlayer/./src/message.js","webpack://LMPlayer/./src/time_line.js","webpack://LMPlayer/./src/event/errorEvent.js","webpack://LMPlayer/./src/event/dragEvent.js","webpack://LMPlayer/./src/api.js","webpack://LMPlayer/./src/live_heart.js","webpack://LMPlayer/./src/player.js","webpack://LMPlayer/./src/history/time_line_history.js","webpack://LMPlayer/./src/history/play_end.js","webpack://LMPlayer/./src/history/index.js","webpack://LMPlayer/./src/index.js","webpack://LMPlayer/./src/createPlayer.js"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__0__","__WEBPACK_EXTERNAL_MODULE__1__","__WEBPACK_EXTERNAL_MODULE__2__","__WEBPACK_EXTERNAL_MODULE__3__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","length","descriptor","configurable","writable","_createClass","protoProps","staticProps","_typeof2","obj","iterator","constructor","_typeof","_possibleConstructorReturn","self","ReferenceError","assertThisInitialized","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","_setPrototypeOf","_inherits","subClass","superClass","VideoEvent","video","this","events","playerEvents","eventName","handle","listener","push","type","addEventListener","index","findIndex","v","splice","removeEventListener","_len","arguments","data","Array","_key","forEach","apply","_this","keys","fn","createHlsPlayer","file","Hls","isSupported","player","liveDurationInfinity","levelLoadingTimeOut","fragLoadingTimeOut","enableWorker","attachMedia","on","Events","MEDIA_ATTACHED","loadSource","MANIFEST_PARSED","createFlvPlayer","options","_options$flvOptions","flvOptions","_options$flvConfig","flvConfig","flvjs","createPlayer","assign","url","enableStashBuffer","stashInitialSize","isLive","attachMediaElement","load","getVideoType","resultArr","exec","replace","isFullscreen","ele","document","fullscreenElement","msFullscreenElement","mozFullScreenElement","webkitFullscreenElement","fullScreenListener","isAdd","fullscreenchange","funcName","map","computedBound","currentPosition","scale","lx","ly","eleRect","getBoundingClientRect","w","width","h","height","x","y","_objectWithoutProperties","source","excluded","sourceKeys","indexOf","objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","videoContext","React","createContext","Provider","Consumer","videoDec","Component","ComponentWithVideoDec","_React$Component","_this$props","forwardRef","external_commonjs_react_commonjs2_react_amd_react_root_React_default","a","createElement","context","ref","IconFont","_ref","_ref$className","className","concat","Slider","renderSliderTips","e","renderTips","_this$layoutDom$getBo","layoutDom","top","tipsX","pageX","percent","setState","tipsY","showTips","tempValue","hideSliderTips","cancelPropagation","stopPropagation","startDrag","dragFlag","body","moveChange","stopDrag","computedPositionForEvent","state","onChange","changeCurrentValue","event","_this$layoutDom$getBo2","sliderDomRef","createRef","lineDom","dragDom","currentPercent","nextProps","ReactDOM","findDOMNode","current","querySelector","_this$layoutDom$getBo3","dx","_this$state","_this$props$available","availablePercent","_this$props$className","style","children","draggable","left","slider_Tips","visibel","Tips","_this2","appendChild","removeChild","_this$props2","_this$props2$classNam","createPortal","Bar","_ref$visibel","RELOAD","RELOAD_FAIL","RELOAD_SUCCESS","ERROR","ERROR_RELOAD","HISTORY_PLAY_END","SEEK","TRANSFORM","CHANGE_PLAY_INDEX","HIDE_CONTRALLER","SHOW_CONTRALLER","CLEAR_ERROR_TIMER","LeftBar","seek","historyEnd","historyPlayEnd","updateRender","forceUpdate","changePlayStatus","api","reloadHistory","paused","play","pause","mutedChange","muted","unmute","mute","volumechange","openSliderVolume","closeSliderVolume","onChangeVolume","volume","_this$props3","setVolume","parseFloat","toFixed","reload","isHistory","emit","EventName","off","_this$props4","playerProps","volumeType","onClick","title","onMouseOver","onMouseOut","src_slider","precent","Math","round","RightBar","update","fullscreen","playContainer","cancelFullScreen","requestFullScreen","setScale","position","getPosition","getScale","setPosition","snapshot","isScale","isfull","Fragment","ContrallerBar","hideContraller","hideBar","showContraller","left_bar","right_bar","ContrallerEvent","clearTimeout","timer","setTimeout","VideoMessage","clearReloadMessage","message","status","errorReload","loading","reloadFail","reloadSuccess","openLoading","closeLoading","TineLine","getDuration","duration","getCurrentTime","currentTime","buffered","getSecondsLoaded","getBuffered","changePlayTime","seekTo","seekendPlay","renderTimeLineTips","time","second_time","ceil","second","min","floor","hour","timeStamp","fastForward","backWind","playPercent","bufferedPercent","ErrorEvent","clearErrorTimer","errorTimer","clearError","console","warn","errorHandle","_console","changePlayIndex","playIndex","args","errorReloadTimer","unload","log","error","reconnectTimer","flvPlayer","hlsPlayer","DragEvent","openDrag","start","pageY","end","transformChange","isDraggable","Api","flv","hls","element","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen","removeAttribute","destroy","seconds","noEmit","getBufferedTime","stopLoad","fraction","requestPictureInPicture","pictureInPictureElement","exitPictureInPicture","rate","playbackRate","_this$player","seekable","Infinity","undefined","canvas","ctx","getContext","videoWidth","videoHeight","drawImage","remove","toDataURL","num","isRest","transition","__setTransform","isAnimate","transform","setPlaybackRate","__player","LiveHeart","canplay","isCanPlay","isPlayError","clearHandle","updateProgress","progressTime","Date","now","focusSeekAction","heartAction","setInterval","timeNow","clearInterval","LMPlayer","initPlayer","src","renderVideoTools","contraller_bar","src_message","dragEvent","contrallerEvent","errorEvent","live_heart","src_time_line","getPlayUrl","getPlayerApiContext","getApi","getProvider","playContainerRef","onInitPlayer","autoPlay","autoplay","poster","_this$props$preload","preload","_this$props$muted","_this$props$loop","loop","_this$props$playsinli","playsinline","providerValue","controls","playsInline","defaultProps","isEnd","historyList","fragments","date","timetemp","YYYY","getFullYear","DD","getDate","MM","getMonth","hh","getHours","mm","getMinutes","ss","getSeconds","dateFormat","beginDate","getTime","computedLineList","disabled","size","begin","lineList","currentLine","filter","currentIndexTime","reduce","currentSizeLine","i2","currentIndexSize","PlayEnd","endedHandle","HistoryPlayer","updateChunk","historyApi","computedIndexFormTime","seekTime","time_line_history","play_end","defaultTime","Player","createHistoryPlayer","_ref2","container","render","src_history","unmountComponentAtNode","src_player"],"mappings":"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","file":"LMPlayer.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"react-dom\"), require(\"hls.js\"), require(\"flv.js\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"LMPlayer\", [\"react\", \"react-dom\", \"hls.js\", \"flv.js\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"LMPlayer\"] = factory(require(\"react\"), require(\"react-dom\"), require(\"hls.js\"), require(\"flv.js\"));\n\telse\n\t\troot[\"LMPlayer\"] = factory(root[\"React\"], root[\"ReactDOM\"], root[\"Hls\"], root[\"flvjs\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__, __WEBPACK_EXTERNAL_MODULE__1__, __WEBPACK_EXTERNAL_MODULE__2__, __WEBPACK_EXTERNAL_MODULE__3__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","module.exports = __WEBPACK_EXTERNAL_MODULE__1__;","module.exports = __WEBPACK_EXTERNAL_MODULE__2__;","module.exports = __WEBPACK_EXTERNAL_MODULE__3__;","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","function _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nexport default function _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","class VideoEvent {\r\n  constructor(video) {\r\n    this.video = video;\r\n    this.events = {};\r\n    this.playerEvents = {};\r\n  }\r\n  on(eventName, handle) {\r\n    this.events && this.events[eventName] ? this.events[eventName].listener.push(handle) : (this.events[eventName] = { type: eventName, listener: [handle] });\r\n  }\r\n  addEventListener(eventName, handle) {\r\n    if (this.video) {\r\n      this.playerEvents[eventName] ? this.playerEvents[eventName].push(handle) : (this.playerEvents[eventName] = [handle]);\r\n      this.video.addEventListener(eventName, handle, false);\r\n    }\r\n  }\r\n  removeEventListener(eventName, handle) {\r\n    if (this.video) {\r\n      if (!this.playerEvents || this.playerEvents[eventName]) {\r\n        return;\r\n      }\r\n      let index = this.playerEvents[eventName].findIndex(v => v === handle);\r\n      index > -1 && this.playerEvents[eventName].splice(index, 1);\r\n      this.video.removeEventListener(eventName, handle, false);\r\n    }\r\n  }\r\n  emit(eventName, ...data) {\r\n    if (!this.events || !this.events[eventName]) {\r\n      return;\r\n    }\r\n    this.events[eventName].listener.forEach(v => {\r\n      v(...data);\r\n    });\r\n  }\r\n  off(eventName, handle) {\r\n    if (!this.events || !this.events.eventName) {\r\n      return;\r\n    }\r\n    let index = this.events[eventName].listener.findIndex(v => v === handle);\r\n    index > -1 && this.events[eventName].listener.splice(index, 1);\r\n  }\r\n  destroy() {\r\n    Object.keys(this.playerEvents).forEach(key => {\r\n      this.playerEvents[key].forEach(fn => {\r\n        this.removeEventListener(key, fn);\r\n      });\r\n    });\r\n    this.playerEvents = null;\r\n    this.events = null;\r\n  }\r\n}\r\n\r\nexport default VideoEvent;\r\n","import flvjs from \"flv.js\";\r\nimport Hls from \"hls.js\";\r\n\r\n/**\r\n * HLS\r\n * @param {*} video\r\n * @param {*} file\r\n */\r\nexport function createHlsPlayer(video, file) {\r\n  if (Hls.isSupported()) {\r\n    const player = new Hls({ liveDurationInfinity: true, levelLoadingTimeOut: 15000, fragLoadingTimeOut: 25000, enableWorker: true });\r\n    player.attachMedia(video);\r\n    player.on(Hls.Events.MEDIA_ATTACHED, () => {\r\n      player.loadSource(file);\r\n      player.on(Hls.Events.MANIFEST_PARSED, () => {\r\n        // console.log(player);\r\n      });\r\n    });\r\n    return player;\r\n  }\r\n}\r\n\r\n/**\r\n * FLV\r\n * @param {*} video\r\n * @param {*} options\r\n */\r\nexport function createFlvPlayer(video, options) {\r\n  const { flvOptions = {}, flvConfig = {} } = options;\r\n  if (flvjs.isSupported()) {\r\n    const player = flvjs.createPlayer(\r\n      Object.assign({}, flvOptions, {\r\n        type: \"flv\",\r\n        url: options.file\r\n      }),\r\n      Object.assign({}, flvConfig, {\r\n        enableWorker: true,\r\n        // lazyLoad: false,\r\n        //Indicates how many seconds of data to be kept for lazyLoad.\r\n        // lazyLoadMaxDuration: 0,\r\n        // autoCleanupMaxBackwardDuration: 3,\r\n        // autoCleanupMinBackwardDuration: 2,\r\n        // autoCleanupSourceBuffer: true,\r\n        enableStashBuffer: false,\r\n        stashInitialSize: 128,\r\n        isLive: options.isLive || true\r\n      })\r\n    );\r\n    player.attachMediaElement(video);\r\n    player.load();\r\n    return player;\r\n  }\r\n}\r\n\r\n/**\r\n * \r\n * @param {*} url\r\n */\r\nexport function getVideoType(url) {\r\n  const reg = /([^\\.\\/\\\\]+)\\.(([a-z]|[0-9])+(\\?\\S+)?)$/i;\r\n  const resultArr = reg.exec(url);\r\n  if (resultArr) {\r\n    return resultArr[2].replace(resultArr[4], \"\");\r\n  }\r\n}\r\n\r\n/**\r\n * \r\n * @param {*} second_time\r\n */\r\nexport function timeStamp(second_time) {\r\n  let time = Math.ceil(second_time);\r\n  if (time > 60) {\r\n    let second = Math.ceil(second_time % 60);\r\n    let min = Math.floor(second_time / 60);\r\n    time = `${min < 10 ? `0${min}` : min}:${second < 10 ? `0${second}` : second}`;\r\n    if (min > 60) {\r\n      min = Math.ceil((second_time / 60) % 60);\r\n      let hour = Math.floor(second_time / 60 / 60);\r\n      time = `${hour < 10 ? `0${hour}` : hour}:${min < 10 ? `0${min}` : min}:${second < 10 ? `0${second}` : second}`;\r\n    } else {\r\n      time = `00:${time}`;\r\n    }\r\n  } else {\r\n    time = `00:00:${time < 10 ? `0${time}` : time}`;\r\n  }\r\n\r\n  return time;\r\n}\r\n\r\n/**\r\n * \r\n * @param {*} timetemp\r\n */\r\nexport function dateFormat(timetemp) {\r\n  const date = new Date(timetemp);\r\n  let YYYY = date.getFullYear();\r\n  let DD = date.getDate();\r\n  let MM = date.getMonth() + 1;\r\n  let hh = date.getHours();\r\n  let mm = date.getMinutes();\r\n  let ss = date.getSeconds();\r\n  return `${YYYY}.${MM > 10 ? MM : \"0\" + MM}.${DD > 10 ? DD : \"0\" + DD} ${hh > 10 ? hh : \"0\" + hh}.${mm > 10 ? mm : \"0\" + mm}.${ss > 10 ? ss : \"0\" + ss}`;\r\n}\r\n\r\n/**\r\n * \r\n * @param {*} element\r\n */\r\nexport function fullscreen(element) {\r\n  if (element.requestFullScreen) {\r\n    element.requestFullScreen();\r\n  } else if (element.webkitRequestFullScreen) {\r\n    element.webkitRequestFullScreen();\r\n  } else if (element.mozRequestFullScreen) {\r\n    element.mozRequestFullScreen();\r\n  } else if (element.msRequestFullscreen) {\r\n    element.msRequestFullscreen();\r\n  }\r\n}\r\n\r\n/**\r\n * exitFullscreen \r\n * @param  {Objct} element \r\n */\r\nexport function exitFullscreen() {\r\n  if (document.exitFullscreen) {\r\n    document.exitFullscreen();\r\n  } else if (document.mozCancelFullScreen) {\r\n    document.mozCancelFullScreen();\r\n  } else if (document.webkitExitFullscreen) {\r\n    document.webkitExitFullscreen();\r\n  } else if (document.msExitFullscreen) {\r\n    document.msExitFullscreen();\r\n  }\r\n}\r\n\r\n/**\r\n * \r\n */\r\nexport function fullscreenEnabled() {\r\n  return document.fullscreenEnabled || document.mozFullScreenEnabled || document.webkitFullscreenEnabled || document.msFullscreenEnabled;\r\n}\r\n\r\n/**\r\n * [isFullscreen ]\r\n * @return [,false]\r\n */\r\nexport function isFullscreen(ele) {\r\n  if (!ele) {\r\n    return false;\r\n  }\r\n  return document.fullscreenElement === ele || document.msFullscreenElement === ele || document.mozFullScreenElement === ele || document.webkitFullscreenElement === ele || false;\r\n}\r\n//  /  \r\nexport function fullScreenListener(isAdd, fullscreenchange) {\r\n  const funcName = isAdd ? \"addEventListener\" : \"removeEventListener\";\r\n  const fullScreenEvents = [\"fullscreenchange\", \"mozfullscreenchange\", \"webkitfullscreenchange\", \"msfullscreenchange\"];\r\n  fullScreenEvents.map(v => document[funcName](v, fullscreenchange));\r\n}\r\n\r\n/**\r\n * \r\n * @param {*} ele\r\n * @param {*} currentPosition\r\n * @param {*} scale\r\n */\r\nexport function computedBound(ele, currentPosition, scale) {\r\n  const data = currentPosition;\r\n  const eleRect = ele.getBoundingClientRect();\r\n  const w = eleRect.width;\r\n  const h = eleRect.height;\r\n  let lx = 0,\r\n    ly = 0;\r\n  if (scale === 1) {\r\n    return [0, 0];\r\n  }\r\n  lx = (w * (scale - 1)) / 2 / scale;\r\n  ly = (h * (scale - 1)) / 2 / scale;\r\n  let x = 0,\r\n    y = 0;\r\n  if (data[0] >= 0 && data[0] > lx) {\r\n    x = lx;\r\n  }\r\n  if (data[0] >= 0 && data[0] < lx) {\r\n    x = data[0];\r\n  }\r\n\r\n  if (data[0] < 0 && data[0] < -lx) {\r\n    x = -lx;\r\n  }\r\n  if (data[0] < 0 && data[0] > -lx) {\r\n    x = data[0];\r\n  }\r\n\r\n  if (data[1] >= 0 && data[1] > ly) {\r\n    y = ly;\r\n  }\r\n  if (data[1] >= 0 && data[1] < ly) {\r\n    y = data[1];\r\n  }\r\n\r\n  if (data[1] < 0 && data[1] < -ly) {\r\n    y = -ly;\r\n  }\r\n  if (data[1] < 0 && data[1] > -ly) {\r\n    y = data[1];\r\n  }\r\n  if (x !== data[0] || y !== data[1]) {\r\n    return [x, y];\r\n  } else {\r\n    return;\r\n  }\r\n}\r\n","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import React from \"react\";\r\n\r\nconst videoContext = React.createContext(null);\r\n\r\nexport const Provider = videoContext.Provider;\r\nexport const Consumer = videoContext.Consumer;\r\n\r\nexport function videoDec(Component) {\r\n  class ComponentWithVideoDec extends React.Component {\r\n    render() {\r\n      const { forwardRef, ...props } = this.props;\r\n      return <Consumer>{context => <Component {...props} {...context} ref={forwardRef} />}</Consumer>;\r\n    }\r\n  }\r\n  return React.forwardRef((props, ref) => <ComponentWithVideoDec {...props} forwardRef={ref} />);\r\n}\r\n","import React from \"react\";\r\nimport \"./style/iconfont.less\";\r\nexport default function IconFont({ type, className = \"\", ...props }) {\r\n  return <i className={`lm-player-iconfont ${type} ${className}`} {...props} />;\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./style/slider.less\";\r\n\r\nclass Slider extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.sliderDomRef = React.createRef();\r\n    this.layoutDom = null;\r\n    this.lineDom = null;\r\n    this.dragDom = null;\r\n    this.dragFlag = false;\r\n    this.state = {\r\n      value: this.props.currentPercent || 0,\r\n      tempValue: 0,\r\n      showTips: false,\r\n      tipsX: 0,\r\n      tipsY: 0\r\n    };\r\n  }\r\n  componentWillReceiveProps(nextProps) {\r\n    if (!this.dragFlag) {\r\n      this.setState({ value: nextProps.currentPercent || 0 });\r\n    }\r\n  }\r\n  componentDidMount() {\r\n    this.layoutDom = ReactDOM.findDOMNode(this.sliderDomRef.current);\r\n    this.dragDom = this.layoutDom.querySelector(\".drag-change-icon\");\r\n    this.lineDom = this.layoutDom.querySelector(\".slider-content\");\r\n\r\n    this.layoutDom.addEventListener(\"mousemove\", this.renderSliderTips, false);\r\n    this.layoutDom.addEventListener(\"mouseout\", this.hideSliderTips, false);\r\n    this.lineDom.addEventListener(\"click\", this.changeCurrentValue, false);\r\n    this.dragDom.addEventListener(\"click\", this.cancelPropagation, false);\r\n    this.dragDom.addEventListener(\"mousedown\", this.startDrag, false);\r\n  }\r\n  componentWillUnmount() {\r\n    this.layoutDom.removeEventListener(\"mousemove\", this.renderSliderTips, false);\r\n    this.layoutDom.removeEventListener(\"mouseout\", this.hideSliderTips, false);\r\n    this.lineDom.removeEventListener(\"click\", this.changeCurrentValue, false);\r\n    this.dragDom.removeEventListener(\"click\", this.cancelPropagation, false);\r\n    this.dragDom.removeEventListener(\"mousedown\", this.startDrag, false);\r\n\r\n    document.body.removeEventListener(\"mousemove\", this.moveChange);\r\n    document.body.removeEventListener(\"mouseup\", this.stopDrag);\r\n\r\n    this.sliderDomRef = null;\r\n    this.layoutDom = null;\r\n    this.lineDom = null;\r\n    this.dragDom = null;\r\n    this.dragFlag = null;\r\n  }\r\n  renderSliderTips = e => {\r\n    const { renderTips } = this.props;\r\n    if (!renderTips) {\r\n      return;\r\n    }\r\n    const { x, width, top } = this.layoutDom.getBoundingClientRect();\r\n    const tipsX = e.pageX;\r\n    let percent = (e.pageX - x) / width;\r\n    percent = percent < 0 ? 0 : percent > 1 ? 1 : percent;\r\n    this.setState({ tipsX, tipsY: top, showTips: true, tempValue: percent });\r\n  };\r\n  hideSliderTips = () => {\r\n    this.setState({ showTips: false });\r\n  };\r\n  cancelPropagation = e => {\r\n    e.stopPropagation();\r\n  };\r\n  startDrag = e => {\r\n    e.stopPropagation();\r\n    this.dragFlag = true;\r\n    document.body.addEventListener(\"mousemove\", this.moveChange);\r\n    document.body.addEventListener(\"mouseup\", this.stopDrag);\r\n  };\r\n  moveChange = e => {\r\n    e.stopPropagation();\r\n    const percent = this.computedPositionForEvent(e);\r\n    this.setState({ value: percent });\r\n  };\r\n  stopDrag = e => {\r\n    e.stopPropagation();\r\n    document.body.removeEventListener(\"mousemove\", this.moveChange);\r\n    document.body.removeEventListener(\"mouseup\", this.stopDrag);\r\n    this.dragFlag = false;\r\n    let percent = this.state.value / 100;\r\n    percent = percent < 0 ? 0 : percent > 1 ? 1 : percent;\r\n    this.props.onChange && this.props.onChange(percent);\r\n  };\r\n  computedPositionForEvent(e) {\r\n    const { x, width } = this.layoutDom.getBoundingClientRect();\r\n    const { pageX } = e;\r\n    let dx = pageX - x;\r\n    if (dx > width) {\r\n      dx = width;\r\n    }\r\n    if (dx < 0) {\r\n      dx = 0;\r\n    }\r\n    return (dx / width) * 100;\r\n  }\r\n  changeCurrentValue = event => {\r\n    event.stopPropagation();\r\n    const { width, x } = this.layoutDom.getBoundingClientRect();\r\n    let percent = (event.pageX - x) / width;\r\n    this.props.onChange && this.props.onChange(percent);\r\n  };\r\n  render() {\r\n    const { value, showTips, tipsX, tipsY } = this.state;\r\n    const { availablePercent = 0, className = \"\" } = this.props;\r\n    return (\r\n      <div className={`slider-layout ${className}`} ref={this.sliderDomRef}>\r\n        <div className=\"slider-content\">\r\n          <div className=\"slider-max-line\" />\r\n          <div className=\"slider-visibel-line\" style={{ width: `${availablePercent}%` }} />\r\n          <div className=\"slider-current-line\" style={{ width: `${value}%` }} />\r\n          {this.props.children}\r\n        </div>\r\n        <div className=\"slider-other-content\">\r\n          <div className=\"drag-change-icon\" draggable={false} style={{ left: `${value}%` }} />\r\n        </div>\r\n        <Tips visibel={showTips} className=\"lm-player-slide-tips\" style={{ left: tipsX, top: tipsY }}>\r\n          {this.props.renderTips && this.props.renderTips(this.state.tempValue)}\r\n        </Tips>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass Tips extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.ele = document.createElement(\"div\");\r\n  }\r\n  componentDidMount() {\r\n    document.body.appendChild(this.ele);\r\n  }\r\n  componentWillUnmount() {\r\n    document.body.removeChild(this.ele);\r\n    this.ele = null;\r\n  }\r\n  render() {\r\n    const { visibel, children, style, className = \"\" } = this.props;\r\n    return ReactDOM.createPortal(\r\n      visibel ? (\r\n        <div className={className} style={style}>\r\n          {children}\r\n        </div>\r\n      ) : null,\r\n      this.ele\r\n    );\r\n  }\r\n}\r\n\r\nexport default Slider;\r\n","import React from \"react\";\r\nexport default function Bar({ visibel = true, className, children, ...props }) {\r\n  if (visibel === false) {\r\n    return null;\r\n  }\r\n  return (\r\n    <span className={`contraller-bar-item ${className}`} {...props}>\r\n      {children}\r\n    </span>\r\n  );\r\n}\r\n","export default {\r\n  RELOAD: \"reload\", //\r\n  RELOAD_FAIL: \"reloadFail\", // \r\n  RELOAD_SUCCESS: \"reloadSuccess\", //\r\n  ERROR: \"error\", //\r\n  ERROR_RELOAD: \"errorRload\", //\r\n  HISTORY_PLAY_END: \"historyPlayEnd\", //\r\n  SEEK: \"seek\", //\r\n  TRANSFORM: \"transform\", //\r\n  CHANGE_PLAY_INDEX: \"changePlayIndex\", //\r\n  HIDE_CONTRALLER:\"hideContraller\",\r\n  SHOW_CONTRALLER:\"showContraller\",\r\n  CLEAR_ERROR_TIMER:\"clearErrorTimer\"\r\n};\r\n","import React from \"react\";\r\nimport IconFont from \"../iconfont\";\r\nimport { videoDec } from \"../context\";\r\nimport Slider from \"../slider\";\r\nimport Bar from \"./bar\";\r\nimport EventName from \"../event/eventName\";\r\n\r\n@videoDec\r\nclass LeftBar extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      openSliderVolume: false\r\n    };\r\n    this.historyEnd = false;\r\n  }\r\n  componentDidMount() {\r\n    const { event } = this.props;\r\n    event.addEventListener(\"play\", this.updateRender);\r\n    event.addEventListener(\"pause\", this.updateRender);\r\n    event.addEventListener(\"volumechange\", this.volumechange);\r\n    event.on(EventName.HISTORY_PLAY_END, this.historyPlayEnd);\r\n    event.on(EventName.SEEK, this.seek);\r\n  }\r\n  componentWillUnmount() {\r\n    const { event } = this.props;\r\n    event.removeEventListener(\"play\", this.updateRender);\r\n    event.removeEventListener(\"pause\", this.updateRender);\r\n    event.removeEventListener(\"volumechange\", this.volumechange);\r\n    event.off(EventName.HISTORY_PLAY_END, this.historyPlayEnd);\r\n    event.off(EventName.SEEK, this.seek);\r\n  }\r\n  seek = () => {\r\n    this.historyEnd = false;\r\n  }\r\n  historyPlayEnd = () => {\r\n    this.historyEnd = true;\r\n  };\r\n  updateRender = () => {\r\n    this.forceUpdate();\r\n  };\r\n  changePlayStatus = () => {\r\n    const { api, video } = this.props;\r\n    if(this.historyEnd){\r\n      this.props.reloadHistory();\r\n    }else{\r\n      video.paused ? api.play() : api.pause();\r\n    }\r\n    \r\n  };\r\n  mutedChange = () => {\r\n    const { api, video } = this.props;\r\n    video.muted ? api.unmute() : api.mute();\r\n  };\r\n  volumechange = () => {\r\n    this.forceUpdate();\r\n  };\r\n  openSliderVolume = () => {\r\n    this.setState({\r\n      openSliderVolume: true\r\n    });\r\n  };\r\n  closeSliderVolume = () => {\r\n    this.setState({\r\n      openSliderVolume: false\r\n    });\r\n  };\r\n  onChangeVolume = volume => {\r\n    const { api, video } = this.props;\r\n    api.setVolume(parseFloat(volume.toFixed(1)));\r\n    if (volume > 0 && video.muted) {\r\n      api.unmute();\r\n    }\r\n  };\r\n  reload = () => {\r\n    if (this.props.isHistory) {\r\n      this.props.reloadHistory();\r\n    } else {\r\n      this.props.api.reload();\r\n    }\r\n    this.props.event.emit(EventName.CLEAR_ERROR_TIMER)\r\n  };\r\n  render() {\r\n    const { openSliderVolume } = this.state;\r\n    const { video, playerProps } = this.props;\r\n    const volumeType = video.volume === 1 ? \"lm-player-volume-max\" : \"lm-player-volume-normal-fuben\";\r\n    return (\r\n      <div className=\"contraller-left-bar\">\r\n        <Bar visibel={!playerProps.isLive}>\r\n          <IconFont onClick={this.changePlayStatus} type={video.paused ? \"lm-player-Play_Main\" : \"lm-player-Pause_Main\"} title={video.paused ? \"\" : \"\"} />\r\n        </Bar>\r\n        <Bar className={`contraller-bar-volume ${openSliderVolume ? \"contraller-bar-hover-volume\" : \"\"}`} onMouseOver={this.openSliderVolume} onMouseOut={this.closeSliderVolume}>\r\n          <IconFont onClick={this.mutedChange} type={video.muted ? \"lm-player-volume-close\" : volumeType} title=\"\" />\r\n          <div className=\"volume-slider-layout\">\r\n            <Slider\r\n              className=\"volume-slider\"\r\n              currentPercent={video.muted ? 0 : video.volume * 100}\r\n              onChange={this.onChangeVolume}\r\n              renderTips={precent => <span>{Math.round(precent * 100)}%</span>}\r\n            />\r\n          </div>\r\n        </Bar>\r\n        <Bar>\r\n          <IconFont onClick={this.reload} type=\"lm-player-Refresh_Main\" title=\"\" />\r\n        </Bar>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LeftBar;\r\n","import React from \"react\";\r\nimport { videoDec } from \"../context\";\r\nimport IconFont from \"../iconfont\";\r\nimport { isFullscreen, fullScreenListener, computedBound } from \"../util\";\r\n\r\n@videoDec\r\nclass RightBar extends React.Component {\r\n  componentDidMount() {\r\n    fullScreenListener(true, this.update);\r\n  }\r\n  componentWillUnmount() {\r\n    fullScreenListener(false, this.update);\r\n  }\r\n  update = () => {\r\n    this.forceUpdate();\r\n  };\r\n  fullscreen = () => {\r\n    const { api, playContainer } = this.props;\r\n    if (!isFullscreen(playContainer)) {\r\n      api.requestFullScreen();\r\n    } else {\r\n      api.cancelFullScreen();\r\n    }\r\n    this.forceUpdate();\r\n  };\r\n  setScale = (...args) => {\r\n    const { api, playContainer } = this.props;\r\n    const dragDom = playContainer.querySelector(\".player-mask-layout\");\r\n    api.setScale(...args);\r\n    let position = computedBound(dragDom, api.getPosition(), api.getScale());\r\n    position && api.setPosition(position, true);\r\n  };\r\n  snapshot = () => {\r\n    const { api, playerProps } = this.props;\r\n    if (playerProps.snapshot) {\r\n      playerProps.snapshot(api.snapshot());\r\n    }\r\n  };\r\n  render() {\r\n    const { playContainer, playerProps } = this.props;\r\n    const { isScale, snapshot } = playerProps;\r\n    const isfull = isFullscreen(playContainer);\r\n    return (\r\n      <div className=\"contraller-right-bar\">\r\n        {isScale && (\r\n          <>\r\n            <span className=\"contraller-bar-item\">\r\n              <IconFont title=\"\" onClick={() => this.setScale(-0.2)} type={\"lm-player-ZoomOut_Main\"} />\r\n            </span>\r\n            <span className=\"contraller-bar-item\">\r\n              <IconFont title=\"\" onClick={() => this.setScale(1, true)} type={\"lm-player-ZoomDefault_Main\"} />\r\n            </span>\r\n            <span className=\"contraller-bar-item\">\r\n              <IconFont title=\"\" onClick={() => this.setScale(0.2)} type={\"lm-player-ZoomIn_Main\"} />\r\n            </span>\r\n          </>\r\n        )}\r\n\r\n        {snapshot && (\r\n          <span className=\"contraller-bar-item\">\r\n            <IconFont title=\"\" onClick={this.snapshot} type=\"lm-player-SearchBox\" />\r\n          </span>\r\n        )}\r\n        <span className=\"contraller-bar-item\">\r\n          <IconFont title={isfull ? \"\" : \"\"} onClick={this.fullscreen} type={isfull ? \"lm-player-ExitFull_Main\" : \"lm-player-Full_Main\"} />\r\n        </span>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nexport default RightBar;\r\n","import React from \"react\";\r\nimport LeftBar from \"./left_bar\";\r\nimport RightBar from \"./right_bar\";\r\nimport EventName from \"../event/eventName\";\r\nimport {videoDec} from '../context'\r\nimport \"../style/bar.less\";\r\n\r\n@videoDec\r\nclass ContrallerBar extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      hideBar: false\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    const { event } = this.props;\r\n    event.on(EventName.HIDE_CONTRALLER, this.hideContraller);\r\n    event.on(EventName.SHOW_CONTRALLER, this.showContraller);\r\n  }\r\n  componentWillUnmount() {\r\n    const { event } = this.props;\r\n    event.off(EventName.HIDE_CONTRALLER, this.hideContraller);\r\n    event.off(EventName.SHOW_CONTRALLER, this.showContraller);\r\n  }\r\n  hideContraller = () => {\r\n    this.setState({ hideBar: true });\r\n  };\r\n  showContraller = () => {\r\n    this.setState({ hideBar: false });\r\n  };\r\n  render() {\r\n    return (\r\n      <div className={`contraller-bar-layout ${this.state.hideBar ? \"hide-contraller-bar\" : \"\"}`}>\r\n        <LeftBar />\r\n        <RightBar />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ContrallerBar;\r\n","import React from \"react\";\r\nimport { videoDec } from \"../context\";\r\nimport EventName from \"./eventName\";\r\n\r\n@videoDec\r\nclass ContrallerEvent extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.timer = null;\r\n  }\r\n  componentDidMount() {\r\n    const { playContainer, event } = this.props;\r\n    playContainer.addEventListener(\"mousemove\", this.showContraller, false);\r\n    playContainer.addEventListener(\"mouseout\", this.hideContraller, false);\r\n    this.timer = setTimeout(() => {\r\n      event.emit(EventName.HIDE_CONTRALLER);\r\n    }, 5 * 1000);\r\n  }\r\n  componentWillUnmount() {\r\n    const { playContainer } = this.props;\r\n    playContainer.addEventListener(\"mousemove\", this.showContraller, false);\r\n    playContainer.addEventListener(\"mouseout\", this.hideContraller, false);\r\n    clearTimeout(this.timer);\r\n  }\r\n  showContraller = () => {\r\n    const { event } = this.props;\r\n    event.emit(EventName.SHOW_CONTRALLER);\r\n    this.hideContraller();\r\n  };\r\n  hideContraller = () => {\r\n    const { event } = this.props;\r\n    clearTimeout(this.timer);\r\n    this.timer = setTimeout(() => {\r\n      event.emit(EventName.HIDE_CONTRALLER);\r\n    }, 3 * 1000);\r\n  };\r\n  render() {\r\n    return null;\r\n  }\r\n}\r\n\r\nexport default ContrallerEvent;\r\n","import React from \"react\";\r\nimport IconFont from \"./iconfont\";\r\nimport { videoDec } from \"./context\";\r\nimport EventName from \"./event/eventName\";\r\n\r\nimport \"./style/message.less\";\r\n\r\n@videoDec\r\nclass VideoMessage extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      loading: false,\r\n      status: null\r\n    };\r\n    this.message = null;\r\n  }\r\n  componentDidMount() {\r\n    const { event } = this.props;\r\n    event.addEventListener(\"loadstart\", this.openLoading);\r\n    event.addEventListener(\"waiting\", this.openLoading);\r\n    event.addEventListener(\"seeking\", this.openLoading);\r\n    event.addEventListener(\"loadeddata\", this.closeLoading);\r\n    event.addEventListener(\"canplay\", this.closeLoading);\r\n    event.on(EventName.ERROR_RELOAD, this.errorReload);\r\n    event.on(EventName.RELOAD_FAIL, this.reloadFail);\r\n    event.on(EventName.RELOAD_SUCCESS, this.reloadSuccess);\r\n    event.on(EventName.RELOAD, this.reload);\r\n    event.on(EventName.HISTORY_PLAY_END, this.historyPlayEnd);\r\n    event.on(EventName.CLEAR_ERROR_TIMER, this.clearReloadMessage);\r\n  }\r\n  componentWillUnmount() {\r\n    const { event } = this.props;\r\n    event.removeEventListener(\"loadstart\", this.openLoading);\r\n    event.removeEventListener(\"waiting\", this.openLoading);\r\n    event.removeEventListener(\"seeking\", this.openLoading);\r\n    event.removeEventListener(\"loadeddata\", this.closeLoading);\r\n    event.removeEventListener(\"canplay\", this.closeLoading);\r\n    event.off(EventName.ERROR_RELOAD, this.errorReload);\r\n    event.off(EventName.RELOAD_FAIL, this.reloadFail);\r\n    event.off(EventName.RELOAD_SUCCESS, this.reloadSuccess);\r\n    event.off(EventName.RELOAD, this.reload);\r\n    event.off(EventName.HISTORY_PLAY_END, this.historyPlayEnd);\r\n    event.off(EventName.CLEAR_ERROR_TIMER, this.clearReloadMessage);\r\n  }\r\n  clearReloadMessage = () => {\r\n    this.message = null\r\n    this.forceUpdate()\r\n  }\r\n  reload = () => {\r\n    this.setState({ status: \"reload\" });\r\n  };\r\n  errorReload = timer => {\r\n    this.message = <div>{timer}</div>;\r\n    this.setState({ status: \"reload\", loading: true });\r\n  };\r\n  reloadFail = () => {\r\n    this.message = <div></div>;\r\n    this.setState({ status: \"fail\" });\r\n  };\r\n  reloadSuccess = () => {\r\n    this.message = null;\r\n    this.setState({ status: null });\r\n  };\r\n  openLoading = () => {\r\n    this.setState({ loading: true });\r\n  };\r\n  closeLoading = () => {\r\n    this.setState({ loading: false });\r\n  };\r\n  historyPlayEnd = () => {\r\n    this.message = null;\r\n    this.setState({ status: null, loading: false });\r\n    this.props.api.pause();\r\n  };\r\n  render() {\r\n    const { loading, status } = this.state;\r\n    return (\r\n      <div className={`lm-player-message-mask ${loading || status === \"fail\" ? \"lm-player-mask-loading-animation\" : \"\"}`}>\r\n        <IconFont\r\n          type={status === \"fail\" ? \"lm-player-YesorNo_No_Dark\" : \"lm-player-Loading\"}\r\n          className={`${loading && status !== \"fail\" ? \"lm-player-loading-animation\" : status === \"fail\" ? \"lm-player-loadfail\" : \"\"} lm-player-loading-icon`}\r\n        />\r\n        <span className=\"lm-player-message\">{this.message}</span>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default VideoMessage;\r\n","import React from \"react\";\r\nimport { videoDec } from \"./context\";\r\nimport IconFont from \"./iconfont\";\r\nimport Slider from \"./slider\";\r\nimport { timeStamp } from \"./util\";\r\nimport EventName from \"./event/eventName\";\r\nimport \"./style/time-line.less\";\r\n\r\n@videoDec\r\nclass TineLine extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      duration: 0,\r\n      currentTime: 0,\r\n      buffered: 0,\r\n      hideBar: false\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    const { event } = this.props;\r\n    event.addEventListener(\"loadedmetadata\", this.getDuration);\r\n    event.addEventListener(\"durationchange\", this.getDuration);\r\n    event.addEventListener(\"timeupdate\", this.getCurrentTime);\r\n    event.addEventListener(\"progress\", this.getBuffered);\r\n    event.addEventListener(\"suspend\", this.getBuffered);\r\n    event.addEventListener(\"seeked\", this.seekendPlay);\r\n    event.on(EventName.HIDE_CONTRALLER, this.hideContraller);\r\n    event.on(EventName.SHOW_CONTRALLER, this.showContraller);\r\n  }\r\n  componentWillUnmount() {\r\n    const { event } = this.props;\r\n    event.removeEventListener(\"loadedmetadata\", this.getDuration);\r\n    event.removeEventListener(\"durationchange\", this.getDuration);\r\n    event.removeEventListener(\"timeupdate\", this.getCurrentTime);\r\n    event.removeEventListener(\"progress\", this.getBuffered);\r\n    event.removeEventListener(\"suspend\", this.getBuffered);\r\n    event.removeEventListener(\"seeked\", this.seekendPlay);\r\n    event.off(EventName.HIDE_CONTRALLER, this.hideContraller);\r\n    event.off(EventName.SHOW_CONTRALLER, this.showContraller);\r\n  }\r\n  hideContraller = () => {\r\n    this.setState({ hideBar: true });\r\n  };\r\n  showContraller = () => {\r\n    this.setState({ hideBar: false });\r\n  };\r\n  getDuration = () => {\r\n    const { api } = this.props;\r\n    this.setState({\r\n      duration: api.getDuration()\r\n    });\r\n  };\r\n  getCurrentTime = () => {\r\n    const { api } = this.props;\r\n    const state = {\r\n      currentTime: api.getCurrentTime(),\r\n      buffered: api.getSecondsLoaded()\r\n    };\r\n    if (state.buffered === this.state.buffered) {\r\n      delete state.buffered;\r\n    }\r\n    this.setState(state);\r\n  };\r\n  getBuffered = () => {\r\n    const { api } = this.props;\r\n    this.setState({\r\n      buffered: api.getSecondsLoaded()\r\n    });\r\n  };\r\n  changePlayTime = percent => {\r\n    const { api } = this.props;\r\n    const currentTime = percent * this.state.duration;\r\n    api.pause();\r\n    this.setState({ currentTime });\r\n    api.seekTo(currentTime);\r\n  };\r\n  seekendPlay = () => {\r\n    const { video, api } = this.props;\r\n    api.play();\r\n  };\r\n  renderTimeLineTips = percent => {\r\n    const currentTime = percent * this.state.duration;\r\n    const time = timeStamp(currentTime);\r\n    return <span>{time}</span>;\r\n  };\r\n  fastForward = () => {\r\n    const { api } = this.props;\r\n    api.fastForward();\r\n  };\r\n  backWind = () => {\r\n    const { api } = this.props;\r\n    api.backWind();\r\n  };\r\n  render() {\r\n    const { duration, currentTime, buffered, hideBar } = this.state;\r\n    const playPercent = Math.round((currentTime / duration) * 100);\r\n    const bufferedPercent = Math.round((buffered / duration) * 100);\r\n    return (\r\n      <div className={`video-time-line-layout ${hideBar ? \"hide-time-line\" : \"\"}`}>\r\n        <IconFont type=\"lm-player-PrevFast\" onClick={this.backWind} className=\"time-line-action-item\" />\r\n        <Slider className=\"time-line-box\" currentPercent={playPercent} availablePercent={bufferedPercent} onChange={this.changePlayTime} renderTips={this.renderTimeLineTips} />\r\n        <IconFont type=\"lm-player-NextFast_Light\" onClick={this.fastForward} className=\"time-line-action-item\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TineLine;\r\n","import React from \"react\";\r\nimport flvjs from \"flv.js\";\r\nimport Hls from \"hls.js\";\r\nimport { videoDec } from \"../context\";\r\nimport EventName from \"./eventName\";\r\n\r\n@videoDec\r\nclass ErrorEvent extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.errorTimer = 0;\r\n  }\r\n  componentDidMount() {\r\n    const { event, flvPlayer, hlsPlayer } = this.props;\r\n    if (flvPlayer) {\r\n      //flv\r\n      flvPlayer.on(flvjs.Events.ERROR, this.errorHandle);\r\n    }\r\n    if (hlsPlayer) {\r\n      //hls\r\n      hlsPlayer.on(Hls.Events.ERROR, this.errorHandle);\r\n    }\r\n    //video\r\n    event.addEventListener(\"error\", this.errorHandle, false);\r\n\r\n    //video\r\n    event.addEventListener(\"canplay\", this.clearError, false);\r\n\r\n    //\r\n    event.on(EventName.CHANGE_PLAY_INDEX, this.clearErrorTimer)\r\n\r\n    //\r\n    event.on(EventName.CLEAR_ERROR_TIMER, this.clearErrorTimer);\r\n  }\r\n  componentWillReceiveProps(nextProps) {\r\n    if (nextProps.flvPlayer && nextProps.flvPlayer !== this.props.flvPlayer) {\r\n      nextProps.flvPlayer.on(flvjs.Events.ERROR, this.errorHandle);\r\n    }\r\n    if (nextProps.hlsPlayer && nextProps.hlsPlayer !== this.props.hlsPlayer) {\r\n      nextProps.hlsPlayer.on(Hls.Events.ERROR, this.errorHandle);\r\n    }\r\n  }\r\n  componentWillUnmount() {\r\n    const { event, flvPlayer, hlsPlayer } = this.props;\r\n    event.removeEventListener(\"error\", this.errorHandle, false);\r\n    flvPlayer && flvPlayer.off(flvjs.Events.ERROR, this.errorHandle);\r\n    hlsPlayer && hlsPlayer.off(Hls.Events.ERROR, this.errorHandle);\r\n    event.off(EventName.CLEAR_ERROR_TIMER, this.clearErrorTimer);\r\n    event.off(EventName.CHANGE_PLAY_INDEX, this.clearErrorTimer)\r\n    clearTimeout(this.reconnectTimer);\r\n  }\r\n\r\n  clearErrorTimer = () => {\r\n    this.errorTimer = 0;\r\n  };\r\n  /**\r\n   * \r\n   */\r\n  clearError = () => {\r\n    const { event } = this.props;\r\n    if (this.errorTimer > 0) {\r\n      console.warn(\"\");\r\n      event.emit(EventName.RELOAD_SUCCESS);\r\n      this.clearErrorTimer();\r\n    }\r\n  };\r\n\r\n  /**\r\n   * \r\n   */\r\n  errorHandle = (...args) => {\r\n    const { event, api, isHistory, changePlayIndex, playIndex, playerProps } = this.props;\r\n    const timer = this.errorTimer + 1;\r\n    event.emit(EventName.ERROR, ...args);\r\n    if (timer > playerProps.errorReloadTimer) {\r\n      isHistory ? changePlayIndex(playIndex + 1) : event.emit(EventName.RELOAD_FAIL), api.unload();\r\n    } else {\r\n      console.log(111111111111)\r\n      event.emit(EventName.ERROR_RELOAD, timer, ...args);\r\n      console.error(`${timer}`, ...args);\r\n      this.errorTimer = timer;\r\n      this.reconnectTimer = setTimeout(() => {\r\n        api.reload();\r\n      }, 1000 * 5);\r\n    }\r\n  };\r\n  render() {\r\n    return null;\r\n  }\r\n}\r\nexport default ErrorEvent;\r\n","import React from \"react\";\r\nimport { videoDec } from \"../context\";\r\nimport { computedBound } from \"../util\";\r\n\r\n@videoDec\r\nclass DragEvent extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    const { playContainer } = props;\r\n\r\n    this.dragDom = playContainer.querySelector(\".player-mask-layout\");\r\n    this.position = {\r\n      start: [0, 0],\r\n      end: [0, 0]\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    const { isDraggable } = this.props.playerProps;\r\n    if (isDraggable) {\r\n      this.dragDom.addEventListener(\"mousedown\", this.openDrag);\r\n      this.props.event.addEventListener(\"transform\", this.transformChange, true);\r\n    }\r\n  }\r\n  componentWillUnmount() {\r\n    this.dragDom.removeEventListener(\"mousedown\", this.openDrag);\r\n    this.props.event.removeEventListener(\"transform\", this.transformChange);\r\n  }\r\n  openDrag = e => {\r\n    this.position.start = [e.pageX, e.pageY];\r\n    this.dragDom.addEventListener(\"mousemove\", this.moveChange);\r\n    this.dragDom.addEventListener(\"mouseup\", this.stopDrag);\r\n  };\r\n  moveChange = e => {\r\n    const { api } = this.props;\r\n    const currentPosition = api.getPosition();\r\n    this.position.end = [e.pageX, e.pageY];\r\n    const x = currentPosition[0] + (this.position.end[0] - this.position.start[0]);\r\n    const y = currentPosition[1] + (this.position.end[1] - this.position.start[1]);\r\n    const position = [x, y];\r\n    api.setPosition(position);\r\n    this.position.start = [e.pageX, e.pageY];\r\n  };\r\n  stopDrag = () => {\r\n    this.dragDom.removeEventListener(\"mousemove\", this.moveChange);\r\n    this.dragDom.removeEventListener(\"mouseup\", this.stopDrag);\r\n    this.transformChange();\r\n  };\r\n  transformChange = () => {\r\n    const { api } = this.props;\r\n    let position = computedBound(this.dragDom, api.getPosition(), api.getScale());\r\n    position && api.setPosition(position, true);\r\n  };\r\n\r\n  render() {\r\n    return null;\r\n  }\r\n}\r\nexport default DragEvent;\r\n","import { fullscreen, isFullscreen, exitFullscreen } from \"./util\";\r\nimport EventName from \"./event/eventName\";\r\nexport default class Api {\r\n  constructor(video, playContainer, event, flv, hls) {\r\n    this.player = video;\r\n    this.playContainer = playContainer;\r\n    this.flv = flv;\r\n    this.hls = hls;\r\n    this.event = event;\r\n    this.scale = 1;\r\n    this.position = [0, 0];\r\n  }\r\n  /**\r\n   *  apiflvhls\r\n   * @param {*} param0\r\n   */\r\n  updateChunk({ flv, hls }) {\r\n    this.flv = flv;\r\n    this.hls = hls;\r\n  }\r\n  /**\r\n   * \r\n   */\r\n  requestFullScreen() {\r\n    if (!isFullscreen(this.playContainer)) {\r\n      fullscreen(this.playContainer);\r\n    }\r\n  }\r\n  /**\r\n   * \r\n   */\r\n  cancelFullScreen() {\r\n    if (isFullscreen(this.playContainer)) {\r\n      exitFullscreen();\r\n    }\r\n  }\r\n  play() {\r\n    if (this.player.paused) {\r\n      this.player.play();\r\n    }\r\n  }\r\n  pause() {\r\n    if (!this.player.paused) {\r\n      this.player.pause();\r\n    }\r\n  }\r\n  destroy() {\r\n    this.player.removeAttribute(\"src\");\r\n    this.unload();\r\n    if (this.flv) {\r\n      this.flv.destroy();\r\n    }\r\n    if (this.hls) {\r\n      this.flv.destroy();\r\n    }\r\n    this.scale = null;\r\n    this.position = null;\r\n  }\r\n\r\n  /**\r\n   * currentTimeseek\r\n   * @param {*} seconds\r\n   * @param {*} noEmit\r\n   */\r\n  seekTo(seconds, noEmit) {\r\n    const buffered = this.getBufferedTime();\r\n    if (this.flv && buffered[0] > seconds) {\r\n      this.flv.unload();\r\n      this.flv.load();\r\n    }\r\n    this.player.currentTime = seconds;\r\n    if (!noEmit) {\r\n      this.event.emit(EventName.SEEK, seconds);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  reload() {\r\n    this.unload();\r\n    this.load();\r\n    this.play();\r\n    this.event.emit(EventName.RELOAD);\r\n    if (this.getCurrentTime !== 0) {\r\n      this.seekTo(0);\r\n    }\r\n  }\r\n  unload() {\r\n    this.flv && this.flv.unload();\r\n    this.hls && this.hls.stopLoad();\r\n  }\r\n  load() {\r\n    this.flv && this.flv.load();\r\n    this.hls && this.hls.loadSource(this.hls.url);\r\n  }\r\n  setVolume(fraction) {\r\n    this.player.volume = fraction;\r\n  }\r\n  mute() {\r\n    this.player.muted = true;\r\n  }\r\n  unmute() {\r\n    this.player.muted = false;\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  requestPictureInPicture() {\r\n    if (this.player.requestPictureInPicture && document.pictureInPictureElement !== this.player) {\r\n      this.player.requestPictureInPicture();\r\n    }\r\n  }\r\n  /**\r\n   * \r\n   */\r\n  exitPictureInPicture() {\r\n    if (document.exitPictureInPicture && document.pictureInPictureElement === this.player) {\r\n      document.exitPictureInPicture();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * \r\n   * @param {*} rate\r\n   */\r\n  setPlaybackRate(rate) {\r\n    this.player.playbackRate = rate;\r\n  }\r\n  /**\r\n   * \r\n   */\r\n  getDuration() {\r\n    if (!this.player) return null;\r\n    const { duration, seekable } = this.player;\r\n    if (duration === Infinity && seekable.length > 0) {\r\n      return seekable.end(seekable.length - 1);\r\n    }\r\n    return duration;\r\n  }\r\n  /**\r\n   * \r\n   */\r\n  getCurrentTime() {\r\n    if (!this.player) return null;\r\n    return this.player.currentTime;\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  getSecondsLoaded() {\r\n    return this.getBufferedTime()[1];\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  getBufferedTime() {\r\n    if (!this.player) return null;\r\n    const { buffered } = this.player;\r\n    if (buffered.length === 0) {\r\n      return [0, 0];\r\n    }\r\n    const end = buffered.end(buffered.length - 1);\r\n    const start = buffered.start(buffered.length - 1);\r\n    const duration = this.getDuration();\r\n    if (end > duration) {\r\n      return duration;\r\n    }\r\n    return [start, end];\r\n  }\r\n  /**\r\n   * seekTo\r\n   * @param {*} second\r\n   */\r\n  fastForward(second = 5) {\r\n    const duration = this.getDuration();\r\n    const currentTime = this.getCurrentTime();\r\n    const time = currentTime + second;\r\n    this.seekTo(time > duration - 1 ? duration - 1 : time);\r\n  }\r\n\r\n  /**\r\n   * seekTo\r\n   * @param {*} second\r\n   */\r\n  backWind(second = 5) {\r\n    const currentTime = this.getCurrentTime();\r\n    const time = currentTime - second;\r\n    this.seekTo(time < 1 ? 1 : time);\r\n  }\r\n\r\n  /**\r\n   * \r\n   */\r\n  snapshot() {\r\n    let canvas = document.createElement(\"canvas\");\r\n    let ctx = canvas.getContext(\"2d\");\r\n    canvas.width = this.player.videoWidth;\r\n    canvas.height = this.player.videoHeight;\r\n    ctx.drawImage(this.player, 0, 0, canvas.width, canvas.height);\r\n    setTimeout(() => {\r\n      canvas.remove();\r\n      canvas = null;\r\n      ctx = null;\r\n    }, 200);\r\n    return canvas.toDataURL();\r\n  }\r\n  setScale(num, isRest = false) {\r\n    let scale = this.scale + num;\r\n    if (isRest) {\r\n      scale = num;\r\n    } else {\r\n      if (scale < 1) {\r\n        scale = 1;\r\n      }\r\n      if (scale > 3) {\r\n        scale = 3;\r\n      }\r\n    }\r\n    this.scale = scale;\r\n    this.player.style.transition = \"transform 0.3s\";\r\n    this.__setTransform();\r\n    this.event.emit(EventName.TRANSFORM);\r\n    setTimeout(() => {\r\n      this.player.style.transition = \"unset\";\r\n    }, 500);\r\n  }\r\n  getScale() {\r\n    return this.scale;\r\n  }\r\n  setPosition(position, isAnimate) {\r\n    this.position = position;\r\n    this.player.style.transition = isAnimate ? \"transform 0.3s\" : \"unset\";\r\n    this.__setTransform();\r\n  }\r\n  getPosition() {\r\n    return this.position;\r\n  }\r\n  __setTransform() {\r\n    this.player.style.transform = `scale(${this.scale}) translate(${this.position[0]}px,${this.position[1]}px)`;\r\n  }\r\n  getApi() {\r\n    return {\r\n      play: this.play.bind(this),\r\n      reload: this.reload.bind(this),\r\n      pause: this.pause.bind(this),\r\n      seekTo: this.seekTo.bind(this),\r\n      setVolume: this.setVolume.bind(this),\r\n      mute: this.mute.bind(this),\r\n      unmute: this.unmute.bind(this),\r\n      requestPictureInPicture: this.requestPictureInPicture.bind(this),\r\n      exitPictureInPicture: this.exitPictureInPicture.bind(this),\r\n      setPlaybackRate: this.setPlaybackRate.bind(this),\r\n      destroy: this.destroy.bind(this),\r\n      getDuration: this.getDuration.bind(this),\r\n      getCurrentTime: this.getCurrentTime.bind(this),\r\n      getSecondsLoaded: this.getSecondsLoaded.bind(this),\r\n      getBufferedTime: this.getBufferedTime.bind(this),\r\n      fastForward: this.fastForward.bind(this),\r\n      backWind: this.backWind.bind(this),\r\n      snapshot: this.snapshot.bind(this),\r\n      requestFullScreen: this.requestFullScreen.bind(this),\r\n      cancelFullScreen: this.cancelFullScreen.bind(this),\r\n      __player: this.player\r\n    };\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { videoDec } from \"./context\";\r\nimport EventName from \"./event/eventName\";\r\n\r\n@videoDec\r\nclass LiveHeart extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.progressTime = Date.now();\r\n    this.timer = null;\r\n    this.isPlayError = false;\r\n    this.errorTimer = 0;\r\n    this.isCanPlay = false\r\n  }\r\n  componentDidMount() {\r\n    const { event } = this.props;\r\n    event.addEventListener(\"progress\", this.updateProgress);\r\n    event.addEventListener(\"canplay\", this.canplay);\r\n    event.on(EventName.ERROR, this.errorHandle);\r\n    event.on(EventName.RELOAD_SUCCESS, this.clearHandle);\r\n    this.heartAction();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const {event} = this.props\r\n    event.removeEventListener(\"progress\", this.updateProgress);\r\n    event.removeEventListener(\"canplay\", this.canplay);\r\n    event.off(EventName.ERROR, this.errorHandle);\r\n    event.off(EventName.RELOAD_SUCCESS, this.clearHandle);\r\n    clearInterval(this.timer);\r\n  }\r\n\r\n  canplay = () => {\r\n    this.isCanPlay = true\r\n  }\r\n  errorHandle = () => {\r\n    this.isPlayError = true;\r\n  };\r\n  clearHandle = () => {\r\n    this.isPlayError = false;\r\n  };\r\n  /**\r\n   * \r\n   */\r\n  updateProgress = () => {\r\n    this.progressTime = Date.now();\r\n    this.focusSeekAction();\r\n  };\r\n\r\n  /**\r\n   * \r\n   */\r\n  heartAction = () => {\r\n    const { api, event } = this.props;\r\n    this.timer = setInterval(() => {\r\n      const timeNow = Date.now();\r\n      const currentTime = api.getCurrentTime();\r\n      if (this.isPlayError || !this.isCanPlay) {\r\n        return;\r\n      }\r\n      if (currentTime > 0) {\r\n        if (timeNow - this.progressTime > 10 * 1000) {\r\n          console.warn(\"reload\");\r\n          api.reload();\r\n        } else {\r\n          this.errorTimer = 0;\r\n        }\r\n      } else {\r\n        if (this.errorTimer >= 5) {\r\n          event.emit(EventName.RELOAD_FAIL, this.errorTimer);\r\n          api.unload();\r\n        } else {\r\n          this.errorTimer++;\r\n          api.reload();\r\n          event.emit(EventName.ERROR_RELOAD, this.errorTimer);\r\n        }\r\n      }\r\n    }, 1000 * 5);\r\n  };\r\n  /**\r\n   * currentTime\r\n   */\r\n  focusSeekAction = () => {\r\n    const { api } = this.props;\r\n    const current = api.getCurrentTime();\r\n    const buffered = api.getSecondsLoaded();\r\n    if (buffered - current > 5) {\r\n      console.warn(`current->${current} buffered->${buffered},  updateTime -> ${buffered - 2}`);\r\n      api.seekTo(buffered - 2 > 0 ? buffered - 2 : 0);\r\n    }\r\n  };\r\n  render() {\r\n    return null;\r\n  }\r\n}\r\nexport default LiveHeart;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport VideoEvent from \"./event\";\r\nimport { getVideoType, createFlvPlayer, createHlsPlayer } from \"./util\";\r\nimport { Provider } from \"./context\";\r\nimport ContrallerBar from \"./contraller_bar\";\r\nimport ContrallerEvent from \"./event/contrallerEvent\";\r\nimport VideoMessage from \"./message\";\r\nimport TimeLine from \"./time_line\";\r\nimport ErrorEvent from \"./event/errorEvent\";\r\nimport DragEvent from \"./event/dragEvent\";\r\nimport Api from \"./api\";\r\nimport LiveHeart from \"./live_heart\";\r\nimport PropTypes from \"prop-types\";\r\nimport \"./style/index.less\";\r\n\r\nclass LMPlayer extends React.Component {\r\n  static propTypes = {\r\n    file: PropTypes.string.isRequired, // \r\n    isLive: PropTypes.bool, //\r\n    errorReloadTimer: PropTypes.number, //\r\n    type: PropTypes.oneOf([\"flv\", \"hls\", \"native\"]), //\r\n    onInitPlayer: PropTypes.func,\r\n    isDraggable: PropTypes.bool,\r\n    isScale: PropTypes.bool,\r\n    muted: PropTypes.string,\r\n    autoPlay: PropTypes.bool,\r\n    playsInline: PropTypes.bool,\r\n    preload: PropTypes.string,\r\n    poster: PropTypes.string,\r\n    loop: PropTypes.bool,\r\n    snapshot: PropTypes.func\r\n  };\r\n  static defaultProps = {\r\n    isLive: true,\r\n    isDraggable: true,\r\n    isScale: true,\r\n    errorReloadTimer: 5,\r\n    muted: \"muted\",\r\n    autoPlay: true,\r\n    playsInline: false,\r\n    preload: \"auto\",\r\n    loop: false\r\n  };\r\n  constructor(props) {\r\n    super(props);\r\n    this.player = null;\r\n    this.event = null;\r\n    this.flv = null;\r\n    this.hls = null;\r\n    this.playContainerRef = React.createRef();\r\n    this.playContainer = null;\r\n  }\r\n  componentDidMount() {\r\n    this.playContainer = ReactDOM.findDOMNode(this.playContainerRef.current);\r\n    this.player = this.playContainer.querySelector(\"video\");\r\n    this.initPlayer();\r\n    this.event = new VideoEvent(this.player);\r\n    this.api = new Api(this.player, this.playContainer, this.event, this.flv, this.hls);\r\n    this.forceUpdate();\r\n    this.props.onInitPlayer && this.props.onInitPlayer(this.getPlayerApiContext());\r\n    if (this.props.autoPlay) {\r\n      this.api.play();\r\n    }\r\n  }\r\n  componentWillUnmount() {\r\n    this.event.destroy();\r\n    this.api.destroy();\r\n    this.player = null;\r\n    this.event = null;\r\n    this.flv = null;\r\n    this.hls = null;\r\n    this.playContainerRef = null;\r\n    this.playContainer = null;\r\n  }\r\n\r\n  initPlayer = () => {\r\n    if (!this.props.file) {\r\n      return null;\r\n    }\r\n    const type = getVideoType(this.props.file);\r\n    if (type === \"flv\" || this.props.type === \"flv\") {\r\n      this.flv = createFlvPlayer(this.player, this.props);\r\n    } else if (type === \"m3u8\" || this.props.type === \"hls\") {\r\n      this.hls = createHlsPlayer(this.player, this.props.file);\r\n    } else {\r\n      this.player.src = this.props.file;\r\n    }\r\n  };\r\n\r\n  renderVideoTools = () => {\r\n    if (!this.player) {\r\n      return null;\r\n    }\r\n    return (\r\n      <>\r\n        <ContrallerBar />\r\n        <VideoMessage />\r\n        <DragEvent />\r\n        <ContrallerEvent />\r\n        <ErrorEvent flvPlayer={this.flv} hlsPlayer={this.hls} />\r\n        {this.props.isLive ? <LiveHeart key={this.props.file} /> : <TimeLine />}\r\n      </>\r\n    );\r\n  };\r\n  getPlayUrl = () => {\r\n    return this.props.file;\r\n  };\r\n  getPlayerApiContext = () => {\r\n    const api = this.api ? this.api.getApi() : {};\r\n    const event = this.event\r\n      ? {\r\n          on: this.event.on.bind(this.event),\r\n          off: this.event.off.bind(this.event),\r\n          emit: this.event.emit.bind(this.event)\r\n        }\r\n      : {};\r\n    return Object.assign({}, api, event, { getPlayUrl: this.getPlayUrl, playContainer: this.playContainer });\r\n  };\r\n  getProvider = () => {\r\n    return {\r\n      video: this.player,\r\n      event: this.event,\r\n      playerProps: this.props,\r\n      api: this.api,\r\n      playContainer: this.playContainer\r\n    };\r\n  };\r\n  render() {\r\n    const { autoplay, poster, preload = \"none\", muted = \"muted\", loop = false, playsinline = false } = this.props;\r\n    const providerValue = this.getProvider();\r\n    return (\r\n      <div className=\"lm-player-container\" ref={this.playContainerRef}>\r\n        <div className=\"player-mask-layout\">\r\n          <video autoPlay={autoplay} preload={preload} muted={muted} poster={poster} controls={false} playsInline={playsinline} loop={loop} />\r\n        </div>\r\n        <Provider value={providerValue}>{this.renderVideoTools()}</Provider>\r\n        {this.props.children}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LMPlayer;\r\n","import React from \"react\";\r\nimport { videoDec } from \"../context\";\r\nimport IconFont from \"../iconfont\";\r\nimport Slider from \"../slider\";\r\nimport { dateFormat } from \"../util\";\r\nimport EventName from '../event/eventName'\r\nimport \"../style/time-line.less\";\r\n\r\n@videoDec\r\nclass TineLine extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      duration: 1,\r\n      currentTime: 0,\r\n      buffered: 0,\r\n      isEnd: false,\r\n      hideBar:false\r\n    };\r\n  }\r\n  componentDidMount() {\r\n    const { event } = this.props;\r\n    event.addEventListener(\"loadedmetadata\", this.getDuration);\r\n    event.addEventListener(\"durationchange\", this.getDuration);\r\n    event.addEventListener(\"timeupdate\", this.getCurrentTime);\r\n    event.addEventListener(\"progress\", this.getBuffered);\r\n    event.addEventListener(\"suspend\", this.getBuffered);\r\n    event.addEventListener(\"seeked\", this.seekendPlay);\r\n    event.on(EventName.HISTORY_PLAY_END, this.historyPlayEnd);\r\n    event.on(EventName.RELOAD, this.reload);\r\n    event.on(EventName.HIDE_CONTRALLER, this.hideContraller);\r\n    event.on(EventName.SHOW_CONTRALLER, this.showContraller);\r\n  }\r\n  componentWillUnmount() {\r\n    const { event } = this.props;\r\n    event.removeEventListener(\"loadedmetadata\", this.getDuration);\r\n    event.removeEventListener(\"durationchange\", this.getDuration);\r\n    event.removeEventListener(\"timeupdate\", this.getCurrentTime);\r\n    event.removeEventListener(\"progress\", this.getBuffered);\r\n    event.removeEventListener(\"suspend\", this.getBuffered);\r\n    event.removeEventListener(\"seeked\", this.seekendPlay);\r\n    event.off(EventName.HISTORY_PLAY_END, this.historyPlayEnd);\r\n    event.off(EventName.RELOAD, this.reload);\r\n    event.off(EventName.HIDE_CONTRALLER, this.hideContraller);\r\n    event.off(EventName.SHOW_CONTRALLER, this.showContraller);\r\n  }\r\n\r\n  hideContraller = () => {\r\n    this.setState({ hideBar: true });\r\n  };\r\n  showContraller = () => {\r\n    this.setState({ hideBar: false });\r\n  };\r\n  /**\r\n   * reload \r\n   */\r\n  reload = () => {\r\n    const {api} = this.props\r\n    this.setState({\r\n      isEnd: false,\r\n      currentTime: api.getCurrentTime()\r\n    });\r\n  };\r\n\r\n  /**\r\n   * current\r\n   */\r\n  historyPlayEnd = () => {\r\n    this.setState({\r\n      isEnd: true\r\n    });\r\n  };\r\n\r\n  /**\r\n   * \r\n   */\r\n  getDuration = () => {\r\n    const { api } = this.props;\r\n    this.setState({\r\n      duration: api.getDuration()\r\n    });\r\n  };\r\n\r\n  /**\r\n   * \r\n   */\r\n  getCurrentTime = () => {\r\n    const { api } = this.props;\r\n    const state = {\r\n      currentTime: api.getCurrentTime(),\r\n      buffered: api.getSecondsLoaded()\r\n    };\r\n    if (state.buffered === this.state.buffered) {\r\n      delete state.buffered;\r\n    }\r\n    this.setState(state);\r\n  };\r\n\r\n  /**\r\n   * \r\n   */\r\n  getBuffered = () => {\r\n    const { api } = this.props;\r\n    this.setState({\r\n      buffered: api.getSecondsLoaded()\r\n    });\r\n  };\r\n\r\n  /**\r\n   * \r\n   */\r\n  changePlayTime = percent => {\r\n    const { seekTo, historyList } = this.props;\r\n    const currentTime = percent * historyList.duration;\r\n    const playIndex = historyList.fragments.findIndex(v => v.end > currentTime);\r\n    const fragment = historyList.fragments[playIndex];\r\n    if (fragment.file) {\r\n      seekTo(currentTime);\r\n      this.setState({ currentTime, isEnd: false });\r\n    }\r\n  };\r\n\r\n  /**\r\n   * \r\n   */\r\n  seekendPlay = () => {\r\n    const { api } = this.props;\r\n    api.play();\r\n  };\r\n\r\n  /**\r\n   * \r\n   */\r\n  renderTimeLineTips = percent => {\r\n    const { historyList } = this.props;\r\n    const currentTime = percent * historyList.duration * 1000;\r\n    const date = dateFormat(new Date(historyList.beginDate).getTime() + currentTime);\r\n    return <span>{date}</span>;\r\n  };\r\n  fastForward = () => {\r\n    const { api } = this.props;\r\n    api.fastForward();\r\n  };\r\n  backWind = () => {\r\n    const { api } = this.props;\r\n    api.backWind();\r\n  };\r\n  computedLineList = historyList => {\r\n    const duration = historyList.duration;\r\n    return historyList.fragments.map(v => {\r\n      return {\r\n        disabled: !v.file,\r\n        size: ((v.end - v.begin) / duration) * 100\r\n      };\r\n    });\r\n  };\r\n  render() {\r\n    const { historyList, playIndex } = this.props;\r\n    const { currentTime, buffered, isEnd ,hideBar } = this.state;\r\n    const lineList = this.computedLineList(historyList);\r\n    const currentLine = lineList.filter((v, i) => i < playIndex).map(v => v.size);\r\n    const currentIndexTime = currentLine.length === 0 ? 0 : currentLine.length > 1 ? currentLine.reduce((p, c) => p + c) : currentLine[0];\r\n    const playPercent = Math.round((currentTime / historyList.duration) * 100 + currentIndexTime);\r\n    const bufferedPercent = Math.round((buffered / historyList.duration) * 100 + currentIndexTime);\r\n    return (\r\n      <div className={`video-time-line-layout ${hideBar ? \"hide-time-line\" : \"\"}`}>\r\n        <IconFont type=\"lm-player-PrevFast\" onClick={this.backWind} className=\"time-line-action-item\" />\r\n        <Slider\r\n          className=\"time-line-box\"\r\n          currentPercent={isEnd ? \"100\" : playPercent}\r\n          availablePercent={bufferedPercent}\r\n          onChange={this.changePlayTime}\r\n          renderTimeLineTips={this.renderTimeLineTips}\r\n        >\r\n          <>\r\n            {lineList.map((v, i) => {\r\n              const currentSizeLine = lineList.filter((v, i2) => i2 < i).map(v => v.size);\r\n              const currentIndexSize = currentSizeLine.length === 0 ? 0 : currentSizeLine.length > 1 ? currentSizeLine.reduce((p, c) => p + c) : currentSizeLine[0];\r\n              return (\r\n                <div className={`history-time-line-item ${v.disabled ? \"history-time-line-disabled\" : \"\"}`} key={i} style={{ width: `${v.size}%`, left: `${currentIndexSize}%` }} />\r\n              );\r\n            })}\r\n          </>\r\n        </Slider>\r\n        <IconFont type=\"lm-player-NextFast_Light\" onClick={this.fastForward} className=\"time-line-action-item\" />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TineLine;\r\n","/**\r\n * history \r\n */\r\n\r\nimport React from \"react\";\r\nimport { videoDec } from \"../context\";\r\n\r\n@videoDec\r\nclass PlayEnd extends React.Component {\r\n  componentDidMount() {\r\n    const { event } = this.props;\r\n    event.addEventListener(\"ended\", this.endedHandle, false);\r\n  }\r\n  componentWillUnmount() {\r\n    const { event } = this.props;\r\n    event.removeEventListener(\"ended\", this.endedHandle, false);\r\n  }\r\n  endedHandle = () => {\r\n    let index = this.props.playIndex\r\n    this.props.changePlayIndex(index + 1)\r\n  };\r\n  render() {\r\n    return null;\r\n  }\r\n}\r\nexport default PlayEnd;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport PropTypes from \"prop-types\";\r\nimport { Provider } from \"../context\";\r\nimport ContrallerBar from \"../contraller_bar\";\r\nimport VideoMessage from \"../message\";\r\nimport HistoryTimeLine from \"./time_line_history\";\r\nimport ErrorEvent from \"../event/errorEvent\";\r\nimport DragEvent from \"../event/dragEvent\";\r\nimport Api from \"../api\";\r\nimport VideoEvent from \"../event\";\r\nimport PlayEnd from \"./play_end\";\r\nimport EventName from \"../event/eventName\";\r\nimport ContrallerEvent from \"../event/contrallerEvent\";\r\nimport { getVideoType, createFlvPlayer, createHlsPlayer } from \"../util\";\r\n\r\nclass HistoryPlayer extends React.Component {\r\n  static propTypes = {\r\n    historyList: PropTypes.object.isRequired, // \r\n    isLive: PropTypes.bool, //\r\n    errorReloadTimer: PropTypes.number, //\r\n    type: PropTypes.oneOf([\"flv\", \"hls\", \"native\"]), //\r\n    onInitPlayer: PropTypes.func,\r\n    isDraggable: PropTypes.bool,\r\n    isScale: PropTypes.bool,\r\n    muted: PropTypes.string,\r\n    autoPlay: PropTypes.bool,\r\n    playsInline: PropTypes.bool,\r\n    preload: PropTypes.string,\r\n    poster: PropTypes.string,\r\n    loop: PropTypes.bool,\r\n    defaultTime: PropTypes.number\r\n  };\r\n  static defaultProps = {\r\n    isLive: true,\r\n    isDraggable: true,\r\n    isScale: true,\r\n    errorReloadTimer: 5,\r\n    muted: \"muted\",\r\n    autoPlay: true,\r\n    playsInline: false,\r\n    preload: \"auto\",\r\n    loop: false,\r\n    defaultTime: 0\r\n  };\r\n  constructor(props) {\r\n    super(props);\r\n    this.playIndex = 0;\r\n    this.player = null;\r\n    this.event = null;\r\n    this.flv = null;\r\n    this.hls = null;\r\n    this.playContainerRef = React.createRef();\r\n    this.playContainer = null;\r\n  }\r\n  componentDidMount() {\r\n    this.playContainer = ReactDOM.findDOMNode(this.playContainerRef.current);\r\n    this.player = this.playContainer.querySelector(\"video\");\r\n    if (this.props.defaultTime) {\r\n      this.seekTo(defaultTime);\r\n    } else {\r\n      this.initPlayer(this.playIndex);\r\n    }\r\n    this.event = new VideoEvent(this.player);\r\n    this.api = new Api(this.player, this.playContainer, this.event, this.flv, this.hls);\r\n    this.props.onInitPlayer && this.props.onInitPlayer(this.getPlayerApiContext());\r\n    if (this.props.autoPlay) {\r\n      this.api.play();\r\n    }\r\n  }\r\n  componentWillUnmount() {\r\n    this.event.destroy();\r\n    this.api.destroy();\r\n    this.player = null;\r\n    this.event = null;\r\n    this.flv = null;\r\n    this.hls = null;\r\n    this.playContainerRef = null;\r\n    this.playContainer = null;\r\n  }\r\n  initPlayer = index => {\r\n    const { historyList } = this.props;\r\n    if (!historyList || !historyList.fragments[index] || !historyList.fragments[index].file) {\r\n      return null;\r\n    }\r\n    if (this.flv) {\r\n      this.flv.unload();\r\n      this.flv.destroy();\r\n      this.flv = null;\r\n    }\r\n    if (this.hls) {\r\n      this.hls.stopLoad();\r\n      this.hls.destroy();\r\n      this.hls = null;\r\n    }\r\n    const type = getVideoType(historyList.fragments[index].file);\r\n    if (type === \"flv\" || this.props.type === \"flv\") {\r\n      this.flv = createFlvPlayer(this.player, { file: historyList.fragments[index].file });\r\n      this.api && this.api.updateChunk({ flv: this.flv });\r\n    } else if (type === \"m3u8\" || this.props.type === \"hls\") {\r\n      this.hls = createHlsPlayer(this.player, historyList.fragments[index].file);\r\n      this.api && this.api.updateChunk({ hls: this.hls });\r\n    } else {\r\n      this.player.src = historyList.fragments[index].file;\r\n    }\r\n    this.playIndex = index;\r\n    this.forceUpdate();\r\n  };\r\n  /**\r\n   * @\r\n   * @\r\n   */\r\n  changePlayIndex = index => {\r\n    const { historyList } = this.props;\r\n    if (!historyList.fragments[index]) {\r\n      this.event.emit(EventName.HISTORY_PLAY_END);\r\n      return;\r\n    }\r\n    if (!historyList.fragments[index].file) {\r\n      this.changePlayIndex(index + 1);\r\n    } else {\r\n      this.initPlayer(index);\r\n    }\r\n    this.api.play();\r\n    this.event.emit(EventName.CHANGE_PLAY_INDEX, index);\r\n  };\r\n\r\n  /**\r\n   * Playerapiseek\r\n   */\r\n  getPlayerApiContext = () => {\r\n    const api = this.api ? this.api.getApi() : {};\r\n    const event = this.event\r\n      ? {\r\n          on: this.event.on.bind(this.event),\r\n          off: this.event.off.bind(this.event),\r\n          emit: this.event.emit.bind(this.event)\r\n        }\r\n      : {};\r\n\r\n    const historyApi = {\r\n      seekTo: this.seekTo\r\n    };\r\n    return Object.assign({}, api, event, historyApi);\r\n  };\r\n\r\n  /**\r\n   * \r\n   */\r\n  computedIndexFormTime = time => {\r\n    const { historyList } = this.props;\r\n    return historyList.fragments.findIndex(v => v.end > time);\r\n  };\r\n\r\n  /**\r\n   * apiseekTo\r\n   */\r\n  seekTo = currentTime => {\r\n    const playIndex = this.computedIndexFormTime(currentTime);\r\n    const fragment = historyList.fragments[playIndex];\r\n    const seekTime = currentTime - fragment.begin - 1;\r\n    this.api.pause();\r\n    if (playIndex !== this.playIndex) {\r\n      this.changePlayIndex(playIndex);\r\n    }\r\n    this.api.seekTo(seekTime, true);\r\n    this.event.emit(EventName.SEEK, currentTime);\r\n  };\r\n\r\n  /**\r\n   * reload\r\n   */\r\n  reloadHistory = () => {\r\n    this.changePlayIndex(0);\r\n    this.api.seekTo(0);\r\n    this.event.emit(EventName.RELOAD);\r\n    this.api.play();\r\n  };\r\n  /**\r\n   * Playercontextvalue\r\n   */\r\n  getProvider = () => {\r\n    return {\r\n      video: this.player,\r\n      event: this.event,\r\n      playerProps: this.props,\r\n      api: this.api,\r\n      playContainer: this.playContainer,\r\n      changePlayIndex: this.changePlayIndex,\r\n      playIndex: this.playIndex,\r\n      historyList: this.props.historyList,\r\n      seekTo: this.seekTo,\r\n      isHistory: true,\r\n      reloadHistory: this.reloadHistory\r\n    };\r\n  };\r\n  renderVideoTools = () => {\r\n    if (!this.player) {\r\n      return null;\r\n    }\r\n    return (\r\n      <>\r\n        <ContrallerBar />\r\n        <VideoMessage />\r\n        <HistoryTimeLine />\r\n        <ContrallerEvent />\r\n        <ErrorEvent flvPlayer={this.flv} hlsPlayer={this.hls} />\r\n        <DragEvent />\r\n        <PlayEnd />\r\n      </>\r\n    );\r\n  };\r\n  render() {\r\n    const { autoplay, poster, preload, muted = \"muted\", loop = false, playsinline = false } = this.props;\r\n    const providerValue = this.getProvider();\r\n    return (\r\n      <div className=\"lm-player-container\" ref={this.playContainerRef}>\r\n        <div className=\"player-mask-layout\">\r\n          <video autoPlay={autoplay} preload={preload} muted={muted} poster={poster} controls={false} playsInline={playsinline} loop={loop} />\r\n        </div>\r\n        <Provider value={providerValue}>{this.renderVideoTools()}</Provider>\r\n        {this.props.children}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default HistoryPlayer;\r\n","import Player from \"./player\";\r\nimport HistoryPlayer from \"./history\";\r\nimport { createHistoryPlayer, createPlayer } from \"./createPlayer\";\r\n\r\nPlayer.HistoryPlayer = HistoryPlayer;\r\nPlayer.createHistoryPlayer = createHistoryPlayer;\r\nPlayer.createPlayer = createPlayer;\r\n\r\nexport default Player;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport Player from \"./player\";\r\nimport HistoryPlayer from \"./history\";\r\n\r\nexport function createPlayer({ container, children, onInitPlayer, ...props }) {\r\n  ReactDOM.render(\r\n    <Player\r\n      {...props}\r\n      onInitPlayer={player => {\r\n        player.destroy = function() {\r\n          ReactDOM.unmountComponentAtNode(container);\r\n        };\r\n        onInitPlayer && onInitPlayer(player);\r\n      }}\r\n    >\r\n      {children}\r\n    </Player>,\r\n    container\r\n  );\r\n}\r\nexport function createHistoryPlayer({ container, children, onInitPlayer, ...props }) {\r\n  ReactDOM.render(\r\n    <HistoryPlayer\r\n      {...props}\r\n      onInitPlayer={player => {\r\n        player.destroy = function() {\r\n          ReactDOM.unmountComponentAtNode(container);\r\n        };\r\n        onInitPlayer && onInitPlayer(player);\r\n      }}\r\n    >\r\n      {children}\r\n    </HistoryPlayer>,\r\n    container\r\n  );\r\n}\r\n"],"sourceRoot":""}